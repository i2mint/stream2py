
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>stream2py.stream_buffer &#8212; stream2py 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="stream2py-stream-buffer">
<h1>stream2py.stream_buffer<a class="headerlink" href="#stream2py-stream-buffer" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.stream_buffer"></span><dl class="py class">
<dt id="stream2py.stream_buffer.StreamBuffer">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.stream_buffer.</code><code class="sig-name descname">StreamBuffer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source_reader</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.source_reader.SourceReader" title="stream2py.source_reader.SourceReader">stream2py.source_reader.SourceReader</a></span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">maxlen</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">sleep_time_on_read_none_s</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Union<span class="p">[</span>int<span class="p">, </span>float<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">auto_drop</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/stream_buffer.html#StreamBuffer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.stream_buffer.StreamBuffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles starting and stopping SourceReader and making BufferReaders</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stream2py</span> <span class="k">import</span> <span class="n">StreamBuffer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stream2py.examples.source_reader</span> <span class="k">import</span> <span class="n">SimpleCounterString</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source_reader</span> <span class="o">=</span> <span class="n">SimpleCounterString</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream_buffer</span> <span class="o">=</span> <span class="n">StreamBuffer</span><span class="p">(</span><span class="n">source_reader</span><span class="o">=</span><span class="n">source_reader</span><span class="p">,</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream_buffer</span><span class="o">.</span><span class="n">is_running</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">stream_buffer</span><span class="o">.</span><span class="n">source_reader_info</span><span class="p">)</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream_buffer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">stream_buffer</span><span class="o">.</span><span class="n">is_running</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream_buffer</span><span class="o">.</span><span class="n">source_reader_info</span>
<span class="go">{&#39;start&#39;: 0, &#39;stop&#39;: 100, &#39;open_count&#39;: 1}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">open1_reader1</span> <span class="o">=</span> <span class="n">stream_buffer</span><span class="o">.</span><span class="n">mk_reader</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">open1_reader1</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">&#39;s0&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">open1_reader2</span> <span class="o">=</span> <span class="n">stream_buffer</span><span class="o">.</span><span class="n">mk_reader</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">open1_reader1</span><span class="o">.</span><span class="n">is_same_buffer</span><span class="p">(</span><span class="n">open1_reader2</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>  <span class="c1"># readers from the same open instance are the same</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">open1_reader1</span><span class="o">.</span><span class="n">next</span><span class="p">()</span> <span class="o">!=</span> <span class="n">open1_reader2</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>  <span class="c1"># item cursor position is different</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream_buffer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">stream_buffer</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">stream_buffer</span><span class="o">.</span><span class="n">source_reader_info</span>
<span class="gp">... </span>    <span class="n">open2_reader1</span>  <span class="o">=</span> <span class="n">stream_buffer</span><span class="o">.</span><span class="n">mk_reader</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">open2_reader2</span>  <span class="o">=</span> <span class="n">stream_buffer</span><span class="o">.</span><span class="n">mk_reader</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">assert</span> <span class="n">open2_reader1</span><span class="o">.</span><span class="n">is_same_buffer</span><span class="p">(</span><span class="n">open2_reader2</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>  <span class="c1"># readers from the same open instance are the same</span>
<span class="gp">... </span>    <span class="k">assert</span> <span class="n">open2_reader1</span><span class="o">.</span><span class="n">is_same_buffer</span><span class="p">(</span><span class="n">open1_reader1</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">False</span>  <span class="c1"># readers from the different open instances</span>
<span class="go">{&#39;start&#39;: 0, &#39;stop&#39;: 100, &#39;open_count&#39;: 2}</span>
</pre></div>
</div>
<dl class="py method">
<dt id="stream2py.stream_buffer.StreamBuffer.drop">
<code class="sig-name descname">drop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/stream_buffer.html#StreamBuffer.drop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.stream_buffer.StreamBuffer.drop" title="Permalink to this definition">¶</a></dt>
<dd><p>Manually drop items from buffer when auto_drop is False</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>n</strong> – number of items to drop from the left side</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.stream_buffer.StreamBuffer.is_running">
<em class="property">property </em><code class="sig-name descname">is_running</code><a class="headerlink" href="#stream2py.stream_buffer.StreamBuffer.is_running" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if stop event has been set.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.stream_buffer.StreamBuffer.mk_reader">
<code class="sig-name descname">mk_reader</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#stream2py.buffer_reader.BufferReader" title="stream2py.buffer_reader.BufferReader">stream2py.buffer_reader.BufferReader</a><a class="reference internal" href="_modules/stream2py/stream_buffer.html#StreamBuffer.mk_reader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.stream_buffer.StreamBuffer.mk_reader" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a BufferReader instance for the currently running  StreamBuffer.
Reader must be made after start() to have data from said start.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>BufferReader instance</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.stream_buffer.StreamBuffer.source_reader_info">
<em class="property">property </em><code class="sig-name descname">source_reader_info</code><a class="headerlink" href="#stream2py.stream_buffer.StreamBuffer.source_reader_info" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict with important source info set by SourceReader.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.stream_buffer.StreamBuffer.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/stream_buffer.html#StreamBuffer.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.stream_buffer.StreamBuffer.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Open and start reading from source_reader into buffer</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.stream_buffer.StreamBuffer.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/stream_buffer.html#StreamBuffer.stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.stream_buffer.StreamBuffer.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop reading and close source_reader</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="stream2py-buffer-consumer">
<h1>stream2py.buffer_consumer<a class="headerlink" href="#stream2py-buffer-consumer" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.buffer_consumer"></span><p>Work in progress. Use as example to construct your own until this is finalized with a standard api.</p>
<p>Abstract classes to make asynchronous consumers of BufferReaders and StreamBuffers.</p>
<dl class="py class">
<dt id="stream2py.buffer_consumer.BufferReaderConsumer">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.buffer_consumer.</code><code class="sig-name descname">BufferReaderConsumer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer_reader</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.buffer_reader.BufferReader" title="stream2py.buffer_reader.BufferReader">stream2py.buffer_reader.BufferReader</a></span></em>, <em class="sig-param"><span class="n">interval</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>int<span class="p">, </span>float<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">logging_enabled</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/buffer_consumer.html#BufferReaderConsumer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.buffer_consumer.BufferReaderConsumer" title="Permalink to this definition">¶</a></dt>
<dd><p>Call reader_handler function with reader at defined time intervals between calls</p>
<dl class="py method">
<dt id="stream2py.buffer_consumer.BufferReaderConsumer.reader_handler">
<em class="property">abstract </em><code class="sig-name descname">reader_handler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer_reader</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.buffer_reader.BufferReader" title="stream2py.buffer_reader.BufferReader">stream2py.buffer_reader.BufferReader</a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/buffer_consumer.html#BufferReaderConsumer.reader_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.buffer_consumer.BufferReaderConsumer.reader_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements how to read from buffer and what to do with the data</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.buffer_consumer.BufferReaderConsumer.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/buffer_consumer.html#BufferReaderConsumer.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.buffer_consumer.BufferReaderConsumer.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls self.reader_handler in a loop while sleeping for self.interval seconds after each call until stop event
is set or Exception is raised by self.reader_handler</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.buffer_consumer.BufferReaderConsumer.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/buffer_consumer.html#BufferReaderConsumer.stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.buffer_consumer.BufferReaderConsumer.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets stop event and waits for thread to finish</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="stream2py.buffer_consumer.StreamBufferConsumer">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.buffer_consumer.</code><code class="sig-name descname">StreamBufferConsumer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stream_buffer</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.stream_buffer.StreamBuffer" title="stream2py.stream_buffer.StreamBuffer">stream2py.stream_buffer.StreamBuffer</a></span></em>, <em class="sig-param"><span class="n">interval</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>int<span class="p">, </span>float<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">logging_enabled</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/buffer_consumer.html#StreamBufferConsumer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.buffer_consumer.StreamBufferConsumer" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="stream2py.buffer_consumer.StreamBufferConsumer.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/buffer_consumer.html#StreamBufferConsumer.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.buffer_consumer.StreamBufferConsumer.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls self.reader_handler in a loop while sleeping for self.interval seconds after each call until stop event
is set or Exception is raised by self.stream_buffer_handler</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.buffer_consumer.StreamBufferConsumer.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/buffer_consumer.html#StreamBufferConsumer.stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.buffer_consumer.StreamBufferConsumer.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets stop event and waits for thread to finish</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.buffer_consumer.StreamBufferConsumer.stream_buffer_handler">
<em class="property">abstract </em><code class="sig-name descname">stream_buffer_handler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stream_buffer</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.stream_buffer.StreamBuffer" title="stream2py.stream_buffer.StreamBuffer">stream2py.stream_buffer.StreamBuffer</a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/buffer_consumer.html#StreamBufferConsumer.stream_buffer_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.buffer_consumer.StreamBufferConsumer.stream_buffer_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements how to read from buffer and what to do with the data</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="stream2py-examples-source-reader">
<h1>stream2py.examples.source_reader<a class="headerlink" href="#stream2py-examples-source-reader" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.examples.source_reader"></span><dl class="py class">
<dt id="stream2py.examples.source_reader.SimpleCounterString">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.examples.source_reader.</code><code class="sig-name descname">SimpleCounterString</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start</span></em>, <em class="sig-param"><span class="n">stop</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/source_reader.html#SimpleCounterString"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.source_reader.SimpleCounterString" title="Permalink to this definition">¶</a></dt>
<dd><p>Count in range returning a string formatted as f’s{count}’</p>
<dl class="py method">
<dt id="stream2py.examples.source_reader.SimpleCounterString.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/source_reader.html#SimpleCounterString.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.source_reader.SimpleCounterString.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close and clean up source reader.
Will be called when StreamBuffer stops or if an exception is raised during read and append loop.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.examples.source_reader.SimpleCounterString.info">
<em class="property">property </em><code class="sig-name descname">info</code><a class="headerlink" href="#stream2py.examples.source_reader.SimpleCounterString.info" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict with important source info. Default can be init_kwargs and open timestamp.</p>
<p>This info will be available in BufferReader after SourceReader has opened but any changes made between open and
close are not guaranteed to be visible. Any continuous status updates should be included with read data instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.examples.source_reader.SimpleCounterString.key">
<code class="sig-name descname">key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/source_reader.html#SimpleCounterString.key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.source_reader.SimpleCounterString.key" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts data into a comparable value to sort by</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – the return value of the ‘read’ method</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ComparableType</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.examples.source_reader.SimpleCounterString.open">
<code class="sig-name descname">open</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/source_reader.html#SimpleCounterString.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.source_reader.SimpleCounterString.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up source to be read and set some source info affected by open time like the time of open.
Will be called in StreamBuffer immediately before first read.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.examples.source_reader.SimpleCounterString.read">
<code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/source_reader.html#SimpleCounterString.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.source_reader.SimpleCounterString.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Must return data that is sortable with ‘key’ method or None. Data that is not readily sortable such as
ordered words of a sentence can be wrapped in a tuple (word_index, word).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>data or None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="stream2py-examples-usage-record-audio-to-files">
<h1>stream2py.examples.usage.record_audio_to_files<a class="headerlink" href="#stream2py-examples-usage-record-audio-to-files" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.examples.usage.record_audio_to_files"></span><div class="section" id="recording-audio-to-wav-file">
<h2>Recording audio to wav file<a class="headerlink" href="#recording-audio-to-wav-file" title="Permalink to this headline">¶</a></h2>
<p>This example requires PyAudio</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">PyAudio</span>
</pre></div>
</div>
<dl class="py class">
<dt id="stream2py.examples.usage.record_audio_to_files.BufferReaderConsumer">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.examples.usage.record_audio_to_files.</code><code class="sig-name descname">BufferReaderConsumer</code><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#BufferReaderConsumer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.record_audio_to_files.BufferReaderConsumer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Thread</span></code></p>
<p>Call reader_handler function with reader at defined time intervals between calls</p>
<dl class="py method">
<dt id="stream2py.examples.usage.record_audio_to_files.BufferReaderConsumer.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer_reader</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.buffer_reader.BufferReader" title="stream2py.buffer_reader.BufferReader">stream2py.buffer_reader.BufferReader</a></span></em>, <em class="sig-param"><span class="n">interval</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>int<span class="p">, </span>float<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">logging_enabled</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#BufferReaderConsumer.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.record_audio_to_files.BufferReaderConsumer.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buffer_reader</strong> – BufferReader created from a StreamBuffer</p></li>
<li><p><strong>interval</strong> – seconds between reader_handler calls</p></li>
<li><p><strong>logging_enabled</strong> – log debug messages using logging module</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.examples.usage.record_audio_to_files.BufferReaderConsumer.reader_handler">
<em class="property">abstract </em><code class="sig-name descname">reader_handler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer_reader</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.buffer_reader.BufferReader" title="stream2py.buffer_reader.BufferReader">stream2py.buffer_reader.BufferReader</a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#BufferReaderConsumer.reader_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.record_audio_to_files.BufferReaderConsumer.reader_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements how to read from buffer and what to do with the data</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.examples.usage.record_audio_to_files.BufferReaderConsumer.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#BufferReaderConsumer.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.record_audio_to_files.BufferReaderConsumer.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls self.reader_handler in a loop while sleeping for self.interval seconds after each call until stop event
is set or Exception is raised by self.reader_handler</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.examples.usage.record_audio_to_files.BufferReaderConsumer.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#BufferReaderConsumer.stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.record_audio_to_files.BufferReaderConsumer.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets stop event and waits for thread to finish</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="stream2py.examples.usage.record_audio_to_files.PyAudioSaver">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.examples.usage.record_audio_to_files.</code><code class="sig-name descname">PyAudioSaver</code><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#PyAudioSaver"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.record_audio_to_files.PyAudioSaver" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#id0" title="stream2py.examples.usage.record_audio_to_files.BufferReaderConsumer"><code class="xref py py-class docutils literal notranslate"><span class="pre">stream2py.examples.usage.record_audio_to_files.BufferReaderConsumer</span></code></a></p>
<p>Save audio to wav file. Start a new wav file on errors such as input overflow.</p>
<dl class="py method">
<dt id="stream2py.examples.usage.record_audio_to_files.PyAudioSaver.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer_reader</span></em>, <em class="sig-param"><span class="n">interval</span></em>, <em class="sig-param"><span class="n">rootdir</span></em>, <em class="sig-param"><span class="n">logging_enabled</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#PyAudioSaver.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.record_audio_to_files.PyAudioSaver.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buffer_reader</strong> – BufferReader created from a StreamBuffer with PyAudioSourceReader</p></li>
<li><p><strong>interval</strong> – seconds between reader_handler calls</p></li>
<li><p><strong>rootdir</strong> – folder path where files will be saved under</p></li>
<li><p><strong>logging_enabled</strong> – log debug messages using logging module</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.examples.usage.record_audio_to_files.PyAudioSaver.close_file">
<code class="sig-name descname">close_file</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#PyAudioSaver.close_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.record_audio_to_files.PyAudioSaver.close_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Close wav file</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.examples.usage.record_audio_to_files.PyAudioSaver.file_is_open">
<code class="sig-name descname">file_is_open</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#PyAudioSaver.file_is_open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.record_audio_to_files.PyAudioSaver.file_is_open" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if file is open
:return: boolean</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.examples.usage.record_audio_to_files.PyAudioSaver.open_file">
<code class="sig-name descname">open_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source_reader_info</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">timestamp</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span> &#x2192; wave.Wave_write<a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#PyAudioSaver.open_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.record_audio_to_files.PyAudioSaver.open_file" title="Permalink to this definition">¶</a></dt>
<dd><p>open wav file for writing</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.examples.usage.record_audio_to_files.PyAudioSaver.reader_handler">
<code class="sig-name descname">reader_handler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer_reader</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.buffer_reader.BufferReader" title="stream2py.buffer_reader.BufferReader">stream2py.buffer_reader.BufferReader</a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#PyAudioSaver.reader_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.record_audio_to_files.PyAudioSaver.reader_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements how to read from buffer and what to do with the data</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.examples.usage.record_audio_to_files.PyAudioSaver.save_error">
<code class="sig-name descname">save_error</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source_reader_info</span></em>, <em class="sig-param"><span class="n">timestamp</span></em>, <em class="sig-param"><span class="n">in_data</span></em>, <em class="sig-param"><span class="n">status_flags</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#PyAudioSaver.save_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.record_audio_to_files.PyAudioSaver.save_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Save to error wav file</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.examples.usage.record_audio_to_files.PyAudioSaver.set_params">
<em class="property">static </em><code class="sig-name descname">set_params</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span><span class="p">:</span> <span class="n">wave.Wave_write</span></em>, <em class="sig-param"><span class="n">source_reader_info</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#PyAudioSaver.set_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.record_audio_to_files.PyAudioSaver.set_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Set wav file params</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.examples.usage.record_audio_to_files.PyAudioSaver.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#PyAudioSaver.stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.record_audio_to_files.PyAudioSaver.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop BufferReaderConsumer loop and close wav file</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.examples.usage.record_audio_to_files.PyAudioSaver.write_to_file">
<code class="sig-name descname">write_to_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">in_data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#PyAudioSaver.write_to_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.record_audio_to_files.PyAudioSaver.write_to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Write to wav file</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="stream2py.examples.usage.record_audio_to_files.audio_to_files">
<code class="sig-prename descclassname">stream2py.examples.usage.record_audio_to_files.</code><code class="sig-name descname">audio_to_files</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rate</span></em>, <em class="sig-param"><span class="n">width</span></em>, <em class="sig-param"><span class="n">channels</span></em>, <em class="sig-param"><span class="n">input_device_index</span></em>, <em class="sig-param"><span class="n">frames_per_buffer</span></em>, <em class="sig-param"><span class="n">interval</span></em>, <em class="sig-param"><span class="n">rootdir</span></em>, <em class="sig-param"><span class="n">logging_enabled</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#audio_to_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.record_audio_to_files.audio_to_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Basically the main function to run the example.
It will record audio with stream2py.sources.audio.PyAudioSourceReader
and save to wav files with stream2py.examples.usage.record_audio_to_files.PyAudioSaver</p>
<p>Check this source code to see how to put together the three components: SourceReader, StreamBuffer, BufferReader</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rate</strong> – Specifies the desired sample rate (in Hz)</p></li>
<li><p><strong>width</strong> – Sample width in bytes (1, 2, 3, or 4)</p></li>
<li><p><strong>channels</strong> – The desired number of input channels. Ignored if input_device is not specified (or None).</p></li>
<li><p><strong>input_device_index</strong> – Index of Input Device to use. Unspecified (or None) uses default device.</p></li>
<li><p><strong>frames_per_buffer</strong> – Specifies the number of frames per buffer.</p></li>
<li><p><strong>interval</strong> – seconds between reader_handler calls</p></li>
<li><p><strong>rootdir</strong> – folder path where files will be saved under</p></li>
<li><p><strong>logging_enabled</strong> – log debug messages using logging module</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="id0">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.examples.usage.record_audio_to_files.</code><code class="sig-name descname">BufferReaderConsumer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer_reader</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.buffer_reader.BufferReader" title="stream2py.buffer_reader.BufferReader">stream2py.buffer_reader.BufferReader</a></span></em>, <em class="sig-param"><span class="n">interval</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>int<span class="p">, </span>float<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">logging_enabled</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#BufferReaderConsumer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id0" title="Permalink to this definition">¶</a></dt>
<dd><p>Call reader_handler function with reader at defined time intervals between calls</p>
<dl class="py method">
<dt id="id1">
<em class="property">abstract </em><code class="sig-name descname">reader_handler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer_reader</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.buffer_reader.BufferReader" title="stream2py.buffer_reader.BufferReader">stream2py.buffer_reader.BufferReader</a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#BufferReaderConsumer.reader_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id1" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements how to read from buffer and what to do with the data</p>
</dd></dl>

<dl class="py method">
<dt id="id2">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#BufferReaderConsumer.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id2" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls self.reader_handler in a loop while sleeping for self.interval seconds after each call until stop event
is set or Exception is raised by self.reader_handler</p>
</dd></dl>

<dl class="py method">
<dt id="id3">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#BufferReaderConsumer.stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id3" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets stop event and waits for thread to finish</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="id4">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.examples.usage.record_audio_to_files.</code><code class="sig-name descname">PyAudioSaver</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer_reader</span></em>, <em class="sig-param"><span class="n">interval</span></em>, <em class="sig-param"><span class="n">rootdir</span></em>, <em class="sig-param"><span class="n">logging_enabled</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#PyAudioSaver"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id4" title="Permalink to this definition">¶</a></dt>
<dd><p>Save audio to wav file. Start a new wav file on errors such as input overflow.</p>
<dl class="py method">
<dt id="id5">
<code class="sig-name descname">close_file</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#PyAudioSaver.close_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id5" title="Permalink to this definition">¶</a></dt>
<dd><p>Close wav file</p>
</dd></dl>

<dl class="py method">
<dt id="id6">
<code class="sig-name descname">file_is_open</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#PyAudioSaver.file_is_open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id6" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if file is open
:return: boolean</p>
</dd></dl>

<dl class="py method">
<dt id="id7">
<code class="sig-name descname">open_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source_reader_info</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">timestamp</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span> &#x2192; wave.Wave_write<a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#PyAudioSaver.open_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id7" title="Permalink to this definition">¶</a></dt>
<dd><p>open wav file for writing</p>
</dd></dl>

<dl class="py method">
<dt id="id8">
<code class="sig-name descname">reader_handler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer_reader</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.buffer_reader.BufferReader" title="stream2py.buffer_reader.BufferReader">stream2py.buffer_reader.BufferReader</a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#PyAudioSaver.reader_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id8" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements how to read from buffer and what to do with the data</p>
</dd></dl>

<dl class="py method">
<dt id="id9">
<code class="sig-name descname">save_error</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source_reader_info</span></em>, <em class="sig-param"><span class="n">timestamp</span></em>, <em class="sig-param"><span class="n">in_data</span></em>, <em class="sig-param"><span class="n">status_flags</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#PyAudioSaver.save_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id9" title="Permalink to this definition">¶</a></dt>
<dd><p>Save to error wav file</p>
</dd></dl>

<dl class="py method">
<dt id="id10">
<em class="property">static </em><code class="sig-name descname">set_params</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span><span class="p">:</span> <span class="n">wave.Wave_write</span></em>, <em class="sig-param"><span class="n">source_reader_info</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#PyAudioSaver.set_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id10" title="Permalink to this definition">¶</a></dt>
<dd><p>Set wav file params</p>
</dd></dl>

<dl class="py method">
<dt id="id11">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#PyAudioSaver.stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id11" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop BufferReaderConsumer loop and close wav file</p>
</dd></dl>

<dl class="py method">
<dt id="id12">
<code class="sig-name descname">write_to_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">in_data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#PyAudioSaver.write_to_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id12" title="Permalink to this definition">¶</a></dt>
<dd><p>Write to wav file</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="id13">
<code class="sig-prename descclassname">stream2py.examples.usage.record_audio_to_files.</code><code class="sig-name descname">audio_to_files</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rate</span></em>, <em class="sig-param"><span class="n">width</span></em>, <em class="sig-param"><span class="n">channels</span></em>, <em class="sig-param"><span class="n">input_device_index</span></em>, <em class="sig-param"><span class="n">frames_per_buffer</span></em>, <em class="sig-param"><span class="n">interval</span></em>, <em class="sig-param"><span class="n">rootdir</span></em>, <em class="sig-param"><span class="n">logging_enabled</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/record_audio_to_files.html#audio_to_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id13" title="Permalink to this definition">¶</a></dt>
<dd><p>Basically the main function to run the example.
It will record audio with stream2py.sources.audio.PyAudioSourceReader
and save to wav files with stream2py.examples.usage.record_audio_to_files.PyAudioSaver</p>
<p>Check this source code to see how to put together the three components: SourceReader, StreamBuffer, BufferReader</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rate</strong> – Specifies the desired sample rate (in Hz)</p></li>
<li><p><strong>width</strong> – Sample width in bytes (1, 2, 3, or 4)</p></li>
<li><p><strong>channels</strong> – The desired number of input channels. Ignored if input_device is not specified (or None).</p></li>
<li><p><strong>input_device_index</strong> – Index of Input Device to use. Unspecified (or None) uses default device.</p></li>
<li><p><strong>frames_per_buffer</strong> – Specifies the number of frames per buffer.</p></li>
<li><p><strong>interval</strong> – seconds between reader_handler calls</p></li>
<li><p><strong>rootdir</strong> – folder path where files will be saved under</p></li>
<li><p><strong>logging_enabled</strong> – log debug messages using logging module</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="stream2py-examples-usage-listen-and-feedback">
<h1>stream2py.examples.usage.listen_and_feedback<a class="headerlink" href="#stream2py-examples-usage-listen-and-feedback" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.examples.usage.listen_and_feedback"></span><dl class="py function">
<dt id="stream2py.examples.usage.listen_and_feedback.listen_and_shout">
<code class="sig-prename descclassname">stream2py.examples.usage.listen_and_feedback.</code><code class="sig-name descname">listen_and_shout</code><span class="sig-paren">(</span><em class="sig-param">transform_wf=&lt;function asis&gt;</em>, <em class="sig-param">every_seconds=1</em>, <em class="sig-param">input_device_index=None</em>, <em class="sig-param">sr=44100</em>, <em class="sig-param">sample_width=2</em>, <em class="sig-param">chk_size=4096</em>, <em class="sig-param">stream_buffer_size_s=60</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/listen_and_feedback.html#listen_and_shout"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.listen_and_feedback.listen_and_shout" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transform_wf</strong> – Callable that will be called on recorded waveform before outputting to speakers</p></li>
<li><p><strong>every_seconds</strong> – Frequency</p></li>
<li><p><strong>input_device_index</strong> – Index of Input Device to use. Unspecified (or None) uses default device.</p></li>
<li><p><strong>sr</strong> – Specifies the desired sample rate (in Hz)</p></li>
<li><p><strong>sample_width</strong> – Sample width in bytes (1, 2, 3, or 4)</p></li>
<li><p><strong>chk_size</strong> – </p></li>
<li><p><strong>stream_buffer_size_s</strong> – How many seconds of data to keep in the buffer (i.e. how far in the past you can see)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="stream2py.examples.usage.listen_and_feedback.push_sound_through_a_pipe">
<code class="sig-prename descclassname">stream2py.examples.usage.listen_and_feedback.</code><code class="sig-name descname">push_sound_through_a_pipe</code><span class="sig-paren">(</span><em class="sig-param">callback=&lt;function print_vol_num&gt;</em>, <em class="sig-param">every_seconds=1</em>, <em class="sig-param">input_device_index=None</em>, <em class="sig-param">sr=44100</em>, <em class="sig-param">sample_width=2</em>, <em class="sig-param">chk_size=4096</em>, <em class="sig-param">stream_buffer_size_s=60</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/listen_and_feedback.html#push_sound_through_a_pipe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.listen_and_feedback.push_sound_through_a_pipe" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transform_wf</strong> – Callable that will be called on recorded waveform before outputting to speakers</p></li>
<li><p><strong>every_seconds</strong> – Frequency</p></li>
<li><p><strong>input_device_index</strong> – Index of Input Device to use. Unspecified (or None) uses default device.</p></li>
<li><p><strong>sr</strong> – Specifies the desired sample rate (in Hz)</p></li>
<li><p><strong>sample_width</strong> – Sample width in bytes (1, 2, 3, or 4)</p></li>
<li><p><strong>chk_size</strong> – </p></li>
<li><p><strong>stream_buffer_size_s</strong> – How many seconds of data to keep in the buffer (i.e. how far in the past you can see)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="stream2py-examples-usage-video-to-stream-and-file">
<h1>stream2py.examples.usage.video_to_stream_and_file<a class="headerlink" href="#stream2py-examples-usage-video-to-stream-and-file" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.examples.usage.video_to_stream_and_file"></span><div class="admonition-todo admonition" id="id14">
<p class="admonition-title">Todo</p>
<p>Maybe for next more advanced version:
* default output files to ~/odir
* set StreamBuffer maxlen to something reasonable
* set VideoShow intervals based on frame_rate
* add a lookup for VideoCapture info like frame_size and frame_rate for any give input
* playback/recording controls</p>
<blockquote>
<div><p>[x] default just plays and records everything
[ ] frame rate control
[ ] skip back/ahead
[ ] start/stop record based on what is currently displayed</p>
<blockquote>
<div><ul class="simple">
<li><p>need to sync VideoWriter and VideoShow</p></li>
</ul>
</div></blockquote>
</div></blockquote>
<p>What interface do I need for VideoWriter and VideoShow
see how to handle syncing buffer_readers between two consumers</p>
<blockquote>
<div><p>sharing one buffer_reader won’t work like anything expected or intended or desired</p>
</div></blockquote>
</div>
<dl class="py function">
<dt id="stream2py.examples.usage.video_to_stream_and_file.video_display_and_save">
<code class="sig-prename descclassname">stream2py.examples.usage.video_to_stream_and_file.</code><code class="sig-name descname">video_display_and_save</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">video_input</span></em>, <em class="sig-param"><span class="n">file_name</span><span class="o">=</span><span class="default_value">'VideoWriter.avi'</span></em>, <em class="sig-param"><span class="n">fourcc</span><span class="o">=</span><span class="default_value">'MJPG'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/video_to_stream_and_file.html#video_display_and_save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.video_to_stream_and_file.video_display_and_save" title="Permalink to this definition">¶</a></dt>
<dd><p>Display recording on screen and save to file</p>
<p>TODO: fps info from devices (camera) is not accurate and need to be calculated</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>video_input</strong> – file name or device id of video source</p></li>
<li><p><strong>file_name</strong> – video file path to save recording</p></li>
<li><p><strong>fourcc</strong> – video file encoding</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="stream2py-examples-usage-audio-pokes">
<h1>stream2py.examples.usage.audio_pokes<a class="headerlink" href="#stream2py-examples-usage-audio-pokes" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.examples.usage.audio_pokes"></span><dl class="py function">
<dt id="stream2py.examples.usage.audio_pokes.live_audio_chks">
<code class="sig-prename descclassname">stream2py.examples.usage.audio_pokes.</code><code class="sig-name descname">live_audio_chks</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">input_device_index</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sr</span><span class="o">=</span><span class="default_value">44100</span></em>, <em class="sig-param"><span class="n">sample_width</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">n_channels</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">chk_size</span><span class="o">=</span><span class="default_value">4096</span></em>, <em class="sig-param"><span class="n">stream_buffer_size_s</span><span class="o">=</span><span class="default_value">60</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/audio_pokes.html#live_audio_chks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.audio_pokes.live_audio_chks" title="Permalink to this definition">¶</a></dt>
<dd><p>A generator of live chunks of audio bytes taken from a stream sourced from specified microphone.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_device_index</strong> – Index of Input Device to use. Unspecified (or None) uses default device.</p></li>
<li><p><strong>sr</strong> – Specifies the desired sample rate (in Hz)</p></li>
<li><p><strong>sample_bytes</strong> – Sample width in bytes (1, 2, 3, or 4)</p></li>
<li><p><strong>n_channels</strong> – The desired number of input channels. Ignored if input_device is not specified (or None).</p></li>
<li><p><strong>sample_width</strong> – Specifies the number of frames per buffer.</p></li>
<li><p><strong>stream_buffer_size_s</strong> – How many seconds of data to keep in the buffer (i.e. how far in the past you can see)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="stream2py.examples.usage.audio_pokes.live_wf">
<code class="sig-prename descclassname">stream2py.examples.usage.audio_pokes.</code><code class="sig-name descname">live_wf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">input_device_index</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sr</span><span class="o">=</span><span class="default_value">44100</span></em>, <em class="sig-param"><span class="n">sample_width</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">n_channels</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">chk_size</span><span class="o">=</span><span class="default_value">4096</span></em>, <em class="sig-param"><span class="n">stream_buffer_size_s</span><span class="o">=</span><span class="default_value">60</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/audio_pokes.html#live_wf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.audio_pokes.live_wf" title="Permalink to this definition">¶</a></dt>
<dd><p>A generator of live waveform sample values taken from a stream sourced from specified microphone.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_device_index</strong> – Index of Input Device to use. Unspecified (or None) uses default device.</p></li>
<li><p><strong>sr</strong> – Specifies the desired sample rate (in Hz)</p></li>
<li><p><strong>sample_width</strong> – Sample width in bytes (1, 2, 3, or 4)</p></li>
<li><p><strong>n_channels</strong> – The desired number of input channels. Ignored if input_device is not specified (or None).</p></li>
<li><p><strong>stream_buffer_size_s</strong> – How many seconds of data to keep in the buffer (i.e. how far in the past you can see)</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">time</span> <span class="k">import</span> <span class="n">sleep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">itertools</span> <span class="k">import</span> <span class="n">islice</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># enter the id of your microphone and get a live waveform source!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (if None, will try to figure it out)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf_gen</span> <span class="o">=</span> <span class="n">live_wf</span><span class="p">(</span><span class="n">input_device_index</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Now wait a bit, say some silly things, then ask for a few samples...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">wf_gen</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">44100</span> <span class="o">*</span> <span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># and now listen to that wf and be embarrassed...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># ... or just look at the size (less fun though)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">wf</span><span class="p">)</span>
<span class="go">44100</span>
</pre></div>
</div>
<p>Don’t forget to close! (or use live_wf_ctx context manager).
&gt;&gt;&gt; wf_gen.close()</p>
<p>After wf_gen is closed, you can still ask it for data.
It just won’t give you any.
&gt;&gt;&gt; wf = list(islice(wf_gen, 0, 44100 * 1))
&gt;&gt;&gt; len(wf)
0</p>
<p>Here wf_gen is a generator, so closing means: <a class="reference external" href="https://docs.python.org/2.5/whatsnew/pep-342.html">https://docs.python.org/2.5/whatsnew/pep-342.html</a></p>
</dd></dl>

<dl class="py function">
<dt id="stream2py.examples.usage.audio_pokes.live_wf_ctx">
<code class="sig-prename descclassname">stream2py.examples.usage.audio_pokes.</code><code class="sig-name descname">live_wf_ctx</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">input_device_index</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sr</span><span class="o">=</span><span class="default_value">44100</span></em>, <em class="sig-param"><span class="n">sample_width</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">n_channels</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">chk_size</span><span class="o">=</span><span class="default_value">4096</span></em>, <em class="sig-param"><span class="n">stream_buffer_size_s</span><span class="o">=</span><span class="default_value">60</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/audio_pokes.html#live_wf_ctx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.audio_pokes.live_wf_ctx" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager providing a generator of live waveform sample values taken from a stream sourced
from specified microphone.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_device_index</strong> – Index of Input Device to use. Unspecified (or None) uses default device.</p></li>
<li><p><strong>sr</strong> – Specifies the desired sample rate (in Hz)</p></li>
<li><p><strong>sample_width</strong> – Sample width in bytes (1, 2, 3, or 4)</p></li>
<li><p><strong>n_channels</strong> – The desired number of input channels. Ignored if input_device is not specified (or None).</p></li>
<li><p><strong>stream_buffer_size_s</strong> – How many seconds of data to keep in the buffer (i.e. how far in the past you can see)</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">time</span> <span class="k">import</span> <span class="n">sleep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">itertools</span> <span class="k">import</span> <span class="n">islice</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># enter the id of your microphone and get a live waveform source!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (if None, will try to figure it out)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">live_wf_ctx</span><span class="p">(</span><span class="n">input_device_index</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="k">as</span> <span class="n">wf_gen</span><span class="p">:</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="c1"># Now wait a bit, say some silly things, then ask for a few samples...</span>
<span class="gp">... </span>    <span class="n">sleep</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">wf</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">wf_gen</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">44100</span> <span class="o">*</span> <span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># and now listen to that wf and be embarrassed...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># ... or just look at the size (less fun though)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">wf</span><span class="p">)</span>
<span class="go">44100</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="stream2py-examples-usage-triggered-starts">
<h1>stream2py.examples.usage.triggered_starts<a class="headerlink" href="#stream2py-examples-usage-triggered-starts" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.examples.usage.triggered_starts"></span><div class="section" id="triggered-starts-in-a-typing-test">
<h2>Triggered Starts in a Typing Test<a class="headerlink" href="#triggered-starts-in-a-typing-test" title="Permalink to this headline">¶</a></h2>
<div class="graphviz"><img src="_images/graphviz-d5b8f5ca9282f2c8a71e99be558b51d7ea3abecf.png" alt="digraph components {
    subgraph cluster_0 {
        style=filled;
        color=lightgrey;
        node [style=filled,color=white];
        label=&quot;Sources&quot;;
        labeljust=&quot;l&quot;
        &quot;TypingTest&quot;
        &quot;KeyboardInput&quot;
    }

    subgraph cluster_1 {
        node [style=filled];
        label=&quot;Readers&quot;;
        labeljust=&quot;l&quot;
        color=lightgrey
        node [style=filled,color=lightgrey];
        &quot;TestProctor&quot;
        &quot;PromptSwitch&quot;
    }
    &quot;KeyboardInput&quot; -&gt; &quot;PromptSwitch&quot; -&gt; &quot;TypingTest&quot; -&gt; &quot;TestProctor&quot;;
    &quot;KeyboardInput&quot; -&gt; &quot;TestProctor&quot;;
}" class="graphviz" /></div>
<p>This example demonstrates the usage of stream2py with 4 asynchronous components:</p>
<ol class="arabic simple">
<li><p>KeyboardInputSourceReader starts at the launch of this program and listens to key presses.</p></li>
<li><p>TypingTest waits for start, stop, and add prompt commands.</p></li>
<li><p>PromptSwitch reads keyboard inputs for commands and tells TypingTest what to do.</p></li>
<li><p>TestProctor gives you TypingTest prompts and grades your keyboard input submissions.</p></li>
</ol>
<div class="section" id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<p>Launching the script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">stream2py</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">usage</span><span class="o">.</span><span class="n">triggered_starts</span>
</pre></div>
</div>
<div class="graphviz"><img src="_images/graphviz-c4db6f1f52ef74b78189825bf9cef00b322a2ddd.png" alt="digraph flow_chart {
    label=&quot;User Flow&quot;;
    labeljust=&quot;l&quot;
    labelloc=&quot;t&quot;
    splines=polyline
    nodesep=.2
    {
        node [shape=oval]
        enter [label=&quot;Begin&quot;]
        exit [label=&quot;Exit&quot;]
    }
    {
        node [shape=diamond label=&quot;Is Started?&quot;]
        started_start
        started_stop
        started_other
    }
    {
        node [shape=box]
        start [label=&quot;Start&quot;]
        stop [label=&quot;Stop&quot;]
        submit [label=&quot;Submit for Score&quot;]
        prompt [label=&quot;New Test Prompt&quot;]
        usage [label=&quot;Display Commands&quot;]
    }
    input [shape=parallelogram, label=&quot;Keyboard Input&quot;]
    enter -&gt; usage -&gt; input;
    input -&gt; started_start [ headlabel=&lt;&lt;font color=&quot;grey25&quot;&gt;&quot;start&quot;&lt;/font&gt;&gt;, labeldistance=2];
    input -&gt; started_stop [ headlabel=&lt;&lt;font color=&quot;grey25&quot;&gt;&quot;stop&quot;&lt;/font&gt;&gt;, labeldistance=3 ];
    input -&gt; started_other [ headlabel=&lt;&lt;font color=&quot;grey25&quot;&gt;&quot;other&quot;*&lt;/font&gt;&gt;, labeldistance=2.5 ];
    input -&gt; exit [ headlabel=&lt;&lt;font color=&quot;grey25&quot;&gt;&quot;exit&quot;&lt;/font&gt;&gt;, labeldistance=1.5 ];
    started_start -&gt; submit  [ label=&quot;Yes&quot; ];
    started_start -&gt; start [ label=&quot;No&quot; ];
    started_stop -&gt; stop [ label=&quot;Yes&quot; ];
    started_stop -&gt; usage [ label=&quot;No&quot; ];
    started_other -&gt; submit [ label=&quot;Yes&quot; ];
    started_other -&gt; usage [ label=&quot;No&quot; ];
    submit -&gt; prompt -&gt; input;
    start -&gt; prompt
    stop -&gt; input
}" class="graphviz" /></div>
</div>
<div class="section" id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="stream2py.sources.keyboard_input.KeyboardInputSourceReader">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.keyboard_input.</code><code class="sig-name descname">KeyboardInputSourceReader</code><a class="reference internal" href="_modules/stream2py/sources/keyboard_input.html#KeyboardInputSourceReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.keyboard_input.KeyboardInputSourceReader" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="stream2py.examples.usage.triggered_starts.TypingTest">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.examples.usage.triggered_starts.</code><code class="sig-name descname">TypingTest</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">prompts</span><span class="p">:</span> <span class="n">Iterable<span class="p">[</span>str<span class="p">]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/triggered_starts.html#TypingTest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.triggered_starts.TypingTest" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="stream2py.examples.usage.triggered_starts.PromptSwitch">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.examples.usage.triggered_starts.</code><code class="sig-name descname">PromptSwitch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">input</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.stream_buffer.StreamBuffer" title="stream2py.stream_buffer.StreamBuffer">stream2py.stream_buffer.StreamBuffer</a></span></em>, <em class="sig-param"><span class="n">prompts</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.stream_buffer.StreamBuffer" title="stream2py.stream_buffer.StreamBuffer">stream2py.stream_buffer.StreamBuffer</a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/triggered_starts.html#PromptSwitch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.triggered_starts.PromptSwitch" title="Permalink to this definition">¶</a></dt>
<dd><p>PromptSwitch will recognize 3 commands: “start”, “stop”, and “exit” followed by a return key press.</p>
<ol class="arabic simple">
<li><p>“start” will start adding prompts after each return key press.</p></li>
<li><p>“stop” will stop adding prompts</p></li>
<li><p>“exit” will exit the program</p></li>
</ol>
</dd></dl>

<dl class="py class">
<dt id="stream2py.examples.usage.triggered_starts.TestProctor">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.examples.usage.triggered_starts.</code><code class="sig-name descname">TestProctor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">input</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.stream_buffer.StreamBuffer" title="stream2py.stream_buffer.StreamBuffer">stream2py.stream_buffer.StreamBuffer</a></span></em>, <em class="sig-param"><span class="n">prompts</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.stream_buffer.StreamBuffer" title="stream2py.stream_buffer.StreamBuffer">stream2py.stream_buffer.StreamBuffer</a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/triggered_starts.html#TestProctor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.triggered_starts.TestProctor" title="Permalink to this definition">¶</a></dt>
<dd><p>Give prompts and grade input</p>
</dd></dl>

<div class="admonition-todo admonition" id="id15">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>Generalize event based triggers.</p></li>
<li><p>Refactor to simplify design patterns.</p></li>
<li><p>Clarify what components are doing and the objectives of the example.</p></li>
</ul>
</div>
<dl class="py class">
<dt id="id16">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.examples.usage.triggered_starts.</code><code class="sig-name descname">PromptSwitch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">input</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.stream_buffer.StreamBuffer" title="stream2py.stream_buffer.StreamBuffer">stream2py.stream_buffer.StreamBuffer</a></span></em>, <em class="sig-param"><span class="n">prompts</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.stream_buffer.StreamBuffer" title="stream2py.stream_buffer.StreamBuffer">stream2py.stream_buffer.StreamBuffer</a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/triggered_starts.html#PromptSwitch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id16" title="Permalink to this definition">¶</a></dt>
<dd><p>PromptSwitch will recognize 3 commands: “start”, “stop”, and “exit” followed by a return key press.</p>
<ol class="arabic simple">
<li><p>“start” will start adding prompts after each return key press.</p></li>
<li><p>“stop” will stop adding prompts</p></li>
<li><p>“exit” will exit the program</p></li>
</ol>
<dl class="py method">
<dt id="stream2py.examples.usage.triggered_starts.PromptSwitch.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/triggered_starts.html#PromptSwitch.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.triggered_starts.PromptSwitch.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Method representing the thread’s activity.</p>
<p>You may override this method in a subclass. The standard run() method
invokes the callable object passed to the object’s constructor as the
target argument, if any, with sequential and keyword arguments taken
from the args and kwargs arguments, respectively.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="id17">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.examples.usage.triggered_starts.</code><code class="sig-name descname">TestProctor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">input</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.stream_buffer.StreamBuffer" title="stream2py.stream_buffer.StreamBuffer">stream2py.stream_buffer.StreamBuffer</a></span></em>, <em class="sig-param"><span class="n">prompts</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.stream_buffer.StreamBuffer" title="stream2py.stream_buffer.StreamBuffer">stream2py.stream_buffer.StreamBuffer</a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/triggered_starts.html#TestProctor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id17" title="Permalink to this definition">¶</a></dt>
<dd><p>Give prompts and grade input</p>
<dl class="py method">
<dt id="stream2py.examples.usage.triggered_starts.TestProctor.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/triggered_starts.html#TestProctor.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.triggered_starts.TestProctor.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Method representing the thread’s activity.</p>
<p>You may override this method in a subclass. The standard run() method
invokes the callable object passed to the object’s constructor as the
target argument, if any, with sequential and keyword arguments taken
from the args and kwargs arguments, respectively.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="id18">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.examples.usage.triggered_starts.</code><code class="sig-name descname">TypingTest</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">prompts</span><span class="p">:</span> <span class="n">Iterable<span class="p">[</span>str<span class="p">]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/triggered_starts.html#TypingTest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id18" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="stream2py.examples.usage.triggered_starts.TypingTest.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/stream2py/examples/usage/triggered_starts.html#TypingTest.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.triggered_starts.TypingTest.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close and clean up source reader.
Will be called when StreamBuffer stops or if an exception is raised during read and append loop.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.examples.usage.triggered_starts.TypingTest.info">
<em class="property">property </em><code class="sig-name descname">info</code><a class="headerlink" href="#stream2py.examples.usage.triggered_starts.TypingTest.info" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict with important source info. Default can be init_kwargs and open timestamp.</p>
<p>This info will be available in BufferReader after SourceReader has opened but any changes made between open and
close are not guaranteed to be visible. Any continuous status updates should be included with read data instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.examples.usage.triggered_starts.TypingTest.key">
<code class="sig-name descname">key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Any</span></em><span class="sig-paren">)</span> &#x2192; ComparableType<a class="reference internal" href="_modules/stream2py/examples/usage/triggered_starts.html#TypingTest.key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.triggered_starts.TypingTest.key" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts data into a comparable value to sort by</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – the return value of the ‘read’ method</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ComparableType</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.examples.usage.triggered_starts.TypingTest.open">
<code class="sig-name descname">open</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/stream2py/examples/usage/triggered_starts.html#TypingTest.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.triggered_starts.TypingTest.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up source to be read and set some source info affected by open time like the time of open.
Will be called in StreamBuffer immediately before first read.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.examples.usage.triggered_starts.TypingTest.read">
<code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>Any<span class="p">]</span><a class="reference internal" href="_modules/stream2py/examples/usage/triggered_starts.html#TypingTest.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.triggered_starts.TypingTest.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Must return data that is sortable with ‘key’ method or None. Data that is not readily sortable such as
ordered words of a sentence can be wrapped in a tuple (word_index, word).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>data or None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="stream2py.examples.usage.triggered_starts.consumer_runner">
<code class="sig-prename descclassname">stream2py.examples.usage.triggered_starts.</code><code class="sig-name descname">consumer_runner</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">consumers</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/triggered_starts.html#consumer_runner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.triggered_starts.consumer_runner" title="Permalink to this definition">¶</a></dt>
<dd><p>contextmanager for calling start and stop on consumers</p>
</dd></dl>

<dl class="py function">
<dt id="stream2py.examples.usage.triggered_starts.source_runner">
<code class="sig-prename descclassname">stream2py.examples.usage.triggered_starts.</code><code class="sig-name descname">source_runner</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sources</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/examples/usage/triggered_starts.html#source_runner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.examples.usage.triggered_starts.source_runner" title="Permalink to this definition">¶</a></dt>
<dd><p>contextmanager for putting SourceReaders in StreamBuffers and calling start and stop</p>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="stream2py-source-reader">
<h1>stream2py.source_reader<a class="headerlink" href="#stream2py-source-reader" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.source_reader"></span><dl class="py class">
<dt id="stream2py.source_reader.SourceReader">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.source_reader.</code><code class="sig-name descname">SourceReader</code><a class="reference internal" href="_modules/stream2py/source_reader.html#SourceReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.source_reader.SourceReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract class interface to be used by StreamBuffer.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stream2py</span> <span class="k">import</span> <span class="n">SourceReader</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">SimpleCounterString</span><span class="p">(</span><span class="n">SourceReader</span><span class="p">):</span>
<span class="gp">... </span>    <span class="sd">&#39;&#39;&#39;Count in range returning a string formatted as f&quot;s{count}&quot;&#39;&#39;&#39;</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">assert</span> <span class="n">start</span> <span class="o">&lt;</span> <span class="n">stop</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">start</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="n">stop</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">range_iterator</span> <span class="o">=</span> <span class="kc">None</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">open_count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">open_count</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">range_iterator</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">))</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">value</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">range_iterator</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="gp">... </span>            <span class="k">return</span> <span class="n">f</span><span class="s1">&#39;s</span><span class="si">{value}</span><span class="s1">&#39;</span>
<span class="gp">... </span>        <span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>            <span class="k">return</span> <span class="kc">None</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">range_iterator</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">range_iterator</span> <span class="o">=</span> <span class="kc">None</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@property</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="n">open_count</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">open_count</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source_reader</span> <span class="o">=</span> <span class="n">SimpleCounterString</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source_reader</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source_reader</span><span class="o">.</span><span class="n">info</span>
<span class="go">{&#39;start&#39;: 0, &#39;stop&#39;: 10, &#39;open_count&#39;: 1}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source_reader</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="go">&#39;s0&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source_reader</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">source_reader</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">source_reader</span><span class="o">.</span><span class="n">info</span>
<span class="gp">... </span>    <span class="n">source_reader</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">source_reader</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">source_reader</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="go">{&#39;start&#39;: 0, &#39;stop&#39;: 10, &#39;open_count&#39;: 2}</span>
<span class="go">&#39;s0&#39;</span>
<span class="go">&#39;s1&#39;</span>
<span class="go">&#39;s2&#39;</span>
</pre></div>
</div>
<dl class="py method">
<dt id="stream2py.source_reader.SourceReader.close">
<em class="property">abstract </em><code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/stream2py/source_reader.html#SourceReader.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.source_reader.SourceReader.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close and clean up source reader.
Will be called when StreamBuffer stops or if an exception is raised during read and append loop.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.source_reader.SourceReader.get_timestamp">
<em class="property">classmethod </em><code class="sig-name descname">get_timestamp</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/stream2py/source_reader.html#SourceReader.get_timestamp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.source_reader.SourceReader.get_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Get timestamp of now as int microseconds</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>timestamp in UTC microseconds</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.source_reader.SourceReader.info">
<em class="property">abstract property </em><code class="sig-name descname">info</code><a class="headerlink" href="#stream2py.source_reader.SourceReader.info" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict with important source info. Default can be init_kwargs and open timestamp.</p>
<p>This info will be available in BufferReader after SourceReader has opened but any changes made between open and
close are not guaranteed to be visible. Any continuous status updates should be included with read data instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.source_reader.SourceReader.key">
<em class="property">abstract </em><code class="sig-name descname">key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Any</span></em><span class="sig-paren">)</span> &#x2192; ComparableType<a class="reference internal" href="_modules/stream2py/source_reader.html#SourceReader.key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.source_reader.SourceReader.key" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts data into a comparable value to sort by</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – the return value of the ‘read’ method</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ComparableType</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.source_reader.SourceReader.open">
<em class="property">abstract </em><code class="sig-name descname">open</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/stream2py/source_reader.html#SourceReader.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.source_reader.SourceReader.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up source to be read and set some source info affected by open time like the time of open.
Will be called in StreamBuffer immediately before first read.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.source_reader.SourceReader.read">
<em class="property">abstract </em><code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>Any<span class="p">]</span><a class="reference internal" href="_modules/stream2py/source_reader.html#SourceReader.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.source_reader.SourceReader.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Must return data that is sortable with ‘key’ method or None. Data that is not readily sortable such as
ordered words of a sentence can be wrapped in a tuple (word_index, word).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>data or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.source_reader.SourceReader.set_sleep_time_on_iter_none">
<code class="sig-name descname">set_sleep_time_on_iter_none</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sleep_time_s</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>int<span class="p">, </span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">0.001</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/source_reader.html#SourceReader.set_sleep_time_on_iter_none"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.source_reader.SourceReader.set_sleep_time_on_iter_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the sleep time of the iter yield loop when next data item is not yet available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sleep_time_s</strong> – seconds to sleep</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.source_reader.SourceReader.sleep_time_on_read_none_s">
<em class="property">property </em><code class="sig-name descname">sleep_time_on_read_none_s</code><a class="headerlink" href="#stream2py.source_reader.SourceReader.sleep_time_on_read_none_s" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets default sleep time for StreamBuffer when it reads None from SourceReader.
Useful when you know the period between data points.</p>
<p>For example if data only comes once every 10 seconds,
it would be inefficient to try and read again every 0.1 seconds and get None up to 100 times
but every 10 seconds or even 1 second would be much more reasonable depending on the use case.
Not necessary if read is a blocking function that always returns a data point.</p>
<p>Default is None which delegates the sleep time to StreamBuffer’s default.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Optional[Union[int, float]] number of seconds to sleep</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="stream2py-buffer-reader">
<h1>stream2py.buffer_reader<a class="headerlink" href="#stream2py-buffer-reader" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.buffer_reader"></span><dl class="py class">
<dt id="stream2py.buffer_reader.BufferReader">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.buffer_reader.</code><code class="sig-name descname">BufferReader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.utility.locked_sorted_deque.RWLockSortedDeque" title="stream2py.utility.locked_sorted_deque.RWLockSortedDeque">stream2py.utility.locked_sorted_deque.RWLockSortedDeque</a></span></em>, <em class="sig-param"><span class="n">source_reader_info</span><span class="p">:</span> <span class="n">dict</span></em>, <em class="sig-param"><span class="n">stop_event</span><span class="p">:</span> <span class="n">threading.Event</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/buffer_reader.html#BufferReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.buffer_reader.BufferReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Reader that is constructed from StreamBuffer.mk_reader()</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stream2py</span> <span class="k">import</span> <span class="n">StreamBuffer</span><span class="p">,</span> <span class="n">BufferReader</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stream2py.examples.source_reader</span> <span class="k">import</span> <span class="n">SimpleCounterString</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source_reader</span> <span class="o">=</span> <span class="n">SimpleCounterString</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream_buffer</span> <span class="o">=</span> <span class="n">StreamBuffer</span><span class="p">(</span><span class="n">source_reader</span><span class="o">=</span><span class="n">source_reader</span><span class="p">,</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream_buffer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span> <span class="o">=</span> <span class="n">stream_buffer</span><span class="o">.</span><span class="n">mk_reader</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">buffer_reader</span><span class="p">,</span> <span class="n">BufferReader</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">is_stopped</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_item</span> <span class="o">==</span> <span class="kc">None</span>  <span class="c1"># None until value is seen</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">next</span><span class="p">()</span> <span class="c1"># get first item</span>
<span class="go">&#39;s0&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_item</span> <span class="c1"># check last_item cursor</span>
<span class="go">&#39;s0&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">next</span><span class="p">(</span><span class="n">peek</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_item</span> <span class="c1"># next will not update last_item cursor</span>
<span class="go">(&#39;s1&#39;, &#39;s0&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">next</span><span class="p">(),</span> <span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_item</span> <span class="c1"># same as what was peeked but now cursor is updated</span>
<span class="go">(&#39;s1&#39;, &#39;s1&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="go">[&#39;s5&#39;, &#39;s6&#39;, &#39;s7&#39;, &#39;s8&#39;, &#39;s9&#39;, &#39;s10&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_item</span>
<span class="go">&#39;s10&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span> <span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_item</span>
<span class="go">([&#39;s5&#39;, &#39;s8&#39;], &#39;s8&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">peek</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[&#39;s10&#39;, &#39;s11&#39;, &#39;s12&#39;, &#39;s13&#39;, &#39;s14&#39;, &#39;s15&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_item</span> <span class="c1"># unchanged with peek</span>
<span class="go">&#39;s8&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_key</span> <span class="c1"># key of last_item</span>
<span class="go">8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">only_new_items</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># only 9 is greater than last item key</span>
<span class="go">[&#39;s9&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_item</span><span class="p">,</span> <span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_key</span>
<span class="go">(&#39;s0&#39;, &#39;s0&#39;, 0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">tail</span><span class="p">(),</span> <span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_item</span><span class="p">,</span> <span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_key</span>
<span class="go">(&#39;s99&#39;, &#39;s99&#39;, 99)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream_buffer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">is_stopped</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="py method">
<dt id="stream2py.buffer_reader.BufferReader.is_same_buffer">
<code class="sig-name descname">is_same_buffer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other_buffer_reader</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/buffer_reader.html#BufferReader.is_same_buffer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.buffer_reader.BufferReader.is_same_buffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if reader is looking at the same buffer</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.buffer_reader.BufferReader.is_stopped">
<em class="property">property </em><code class="sig-name descname">is_stopped</code><a class="headerlink" href="#stream2py.buffer_reader.BufferReader.is_stopped" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if stop event has been set by StreamBuffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.buffer_reader.BufferReader.last_item">
<em class="property">property </em><code class="sig-name descname">last_item</code><a class="headerlink" href="#stream2py.buffer_reader.BufferReader.last_item" title="Permalink to this definition">¶</a></dt>
<dd><p>last seen item cursor</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.buffer_reader.BufferReader.last_key">
<em class="property">property </em><code class="sig-name descname">last_key</code><a class="headerlink" href="#stream2py.buffer_reader.BufferReader.last_key" title="Permalink to this definition">¶</a></dt>
<dd><p>key to last seen item cursor</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.buffer_reader.BufferReader.next">
<code class="sig-name descname">next</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">peek</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ignore_no_item_found</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/buffer_reader.html#BufferReader.next"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.buffer_reader.BufferReader.next" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds an item with a key greater than the last returned item.
Raise ValueError if no item found with key above last item.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>peek</strong> – if True, last_item cursor will not be updated</p></li>
<li><p><strong>ignore_no_item_found</strong> – if True, return None when no next item instead of raising exception</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>next item</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.buffer_reader.BufferReader.range">
<code class="sig-name descname">range</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start</span></em>, <em class="sig-param"><span class="n">stop</span></em>, <em class="sig-param"><span class="n">step</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">peek</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ignore_no_item_found</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">only_new_items</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/buffer_reader.html#BufferReader.range"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.buffer_reader.BufferReader.range" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables:
1. Get last n minutes
2. Give me data I don’t have</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> – starting range key of item inclusive</p></li>
<li><p><strong>stop</strong> – ending range key of item inclusive</p></li>
<li><p><strong>step</strong> – </p></li>
<li><p><strong>peek</strong> – if True, last_item cursor will not be updated</p></li>
<li><p><strong>ignore_no_item_found</strong> – if True, return None when no next item instead of raising exception</p></li>
<li><p><strong>only_new_items</strong> – if True and no new items, raise ValueError or return None if ignore_no_item_found</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of items in range</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.buffer_reader.BufferReader.set_sleep_time_on_iter_none">
<code class="sig-name descname">set_sleep_time_on_iter_none</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sleep_time_s</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>int<span class="p">, </span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">0.1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/buffer_reader.html#BufferReader.set_sleep_time_on_iter_none"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.buffer_reader.BufferReader.set_sleep_time_on_iter_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the sleep time of the iter yield loop when next data item is not yet available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sleep_time_s</strong> – seconds to sleep</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.buffer_reader.BufferReader.source_reader_info">
<em class="property">property </em><code class="sig-name descname">source_reader_info</code><a class="headerlink" href="#stream2py.buffer_reader.BufferReader.source_reader_info" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict with important source info set by SourceReader.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.buffer_reader.BufferReader.tail">
<code class="sig-name descname">tail</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">peek</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ignore_no_item_found</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">only_new_items</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/buffer_reader.html#BufferReader.tail"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.buffer_reader.BufferReader.tail" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the last item in buffer. Raise ValueError if no item found.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>peek</strong> – if True, last_item cursor will not be updated</p></li>
<li><p><strong>ignore_no_item_found</strong> – if True, return None when no next item instead of raising exception</p></li>
<li><p><strong>only_new_items</strong> – if True and no new items, raise ValueError or return None if ignore_no_item_found</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tail item</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="stream2py-consumers-video-write">
<h1>stream2py.consumers.video.write<a class="headerlink" href="#stream2py-consumers-video-write" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.consumers.video.write"></span><dl class="py class">
<dt id="stream2py.consumers.video.write.VideoWriter">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.consumers.video.write.</code><code class="sig-name descname">VideoWriter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer_reader</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.buffer_reader.BufferReader" title="stream2py.buffer_reader.BufferReader">stream2py.buffer_reader.BufferReader</a></span></em>, <em class="sig-param"><span class="n">interval</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>int<span class="p">, </span>float<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">file_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">fourcc</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>tuple<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">fps</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>float<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">frame_size</span><span class="p">:</span> <span class="n">Tuple<span class="p">[</span>int<span class="p">, </span>int<span class="p">]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/consumers/video/write.html#VideoWriter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.consumers.video.write.VideoWriter" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="stream2py.consumers.video.write.VideoWriter.reader_handler">
<code class="sig-name descname">reader_handler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer_reader</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.buffer_reader.BufferReader" title="stream2py.buffer_reader.BufferReader">stream2py.buffer_reader.BufferReader</a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/consumers/video/write.html#VideoWriter.reader_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.consumers.video.write.VideoWriter.reader_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements how to read from buffer and what to do with the data</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.consumers.video.write.VideoWriter.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/consumers/video/write.html#VideoWriter.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.consumers.video.write.VideoWriter.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the thread’s activity.</p>
<p>It must be called at most once per thread object. It arranges for the
object’s run() method to be invoked in a separate thread of control.</p>
<p>This method will raise a RuntimeError if called more than once on the
same thread object.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.consumers.video.write.VideoWriter.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/consumers/video/write.html#VideoWriter.stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.consumers.video.write.VideoWriter.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets stop event and waits for thread to finish</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="stream2py-consumers-video-show">
<h1>stream2py.consumers.video.show<a class="headerlink" href="#stream2py-consumers-video-show" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.consumers.video.show"></span><dl class="py class">
<dt id="stream2py.consumers.video.show.VideoShow">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.consumers.video.show.</code><code class="sig-name descname">VideoShow</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer_reader</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.buffer_reader.BufferReader" title="stream2py.buffer_reader.BufferReader">stream2py.buffer_reader.BufferReader</a></span></em>, <em class="sig-param"><span class="n">interval</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>int<span class="p">, </span>float<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">window_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'VideoShow'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/consumers/video/show.html#VideoShow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.consumers.video.show.VideoShow" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="stream2py.consumers.video.show.VideoShow.reader_handler">
<code class="sig-name descname">reader_handler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer_reader</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.buffer_reader.BufferReader" title="stream2py.buffer_reader.BufferReader">stream2py.buffer_reader.BufferReader</a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/consumers/video/show.html#VideoShow.reader_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.consumers.video.show.VideoShow.reader_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements how to read from buffer and what to do with the data</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.consumers.video.show.VideoShow.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/consumers/video/show.html#VideoShow.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.consumers.video.show.VideoShow.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the thread’s activity.</p>
<p>It must be called at most once per thread object. It arranges for the
object’s run() method to be invoked in a separate thread of control.</p>
<p>This method will raise a RuntimeError if called more than once on the
same thread object.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.consumers.video.show.VideoShow.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/consumers/video/show.html#VideoShow.stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.consumers.video.show.VideoShow.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets stop event and waits for thread to finish</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="stream2py-init">
<h1>stream2py.__init__<a class="headerlink" href="#stream2py-init" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.__init__"></span><div class="section" id="api-documentation">
<h2>API Documentation<a class="headerlink" href="#api-documentation" title="Permalink to this headline">¶</a></h2>
<div class="graphviz"><img src="_images/graphviz-21f1d93b407a292d84669d2177b78b309a2662de.png" alt="digraph {
    rankdir=LR;
    &quot;SourceReader&quot; [shape=cds]
    &quot;StreamBuffer&quot; [shape=box3d]
    &quot;SourceReader&quot; -&gt; &quot;StreamBuffer&quot; -&gt; &quot;BufferReader1&quot;;
    &quot;StreamBuffer&quot; -&gt; &quot;BufferReader2&quot;;
    &quot;StreamBuffer&quot; -&gt; &quot;BufferReader3&quot;;
}" class="graphviz" /></div>
<div class="section" id="id19">
<h3>Classes<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="stream2py.SourceReader">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.</code><code class="sig-name descname">SourceReader</code><a class="reference internal" href="_modules/stream2py/source_reader.html#SourceReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.SourceReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract class interface to be used by StreamBuffer.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stream2py</span> <span class="k">import</span> <span class="n">SourceReader</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">SimpleCounterString</span><span class="p">(</span><span class="n">SourceReader</span><span class="p">):</span>
<span class="gp">... </span>    <span class="sd">&#39;&#39;&#39;Count in range returning a string formatted as f&quot;s{count}&quot;&#39;&#39;&#39;</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">assert</span> <span class="n">start</span> <span class="o">&lt;</span> <span class="n">stop</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">start</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="n">stop</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">range_iterator</span> <span class="o">=</span> <span class="kc">None</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">open_count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">open_count</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">range_iterator</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">))</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">value</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">range_iterator</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="gp">... </span>            <span class="k">return</span> <span class="n">f</span><span class="s1">&#39;s</span><span class="si">{value}</span><span class="s1">&#39;</span>
<span class="gp">... </span>        <span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>            <span class="k">return</span> <span class="kc">None</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">range_iterator</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">range_iterator</span> <span class="o">=</span> <span class="kc">None</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@property</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="n">open_count</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">open_count</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source_reader</span> <span class="o">=</span> <span class="n">SimpleCounterString</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source_reader</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source_reader</span><span class="o">.</span><span class="n">info</span>
<span class="go">{&#39;start&#39;: 0, &#39;stop&#39;: 10, &#39;open_count&#39;: 1}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source_reader</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="go">&#39;s0&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source_reader</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">source_reader</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">source_reader</span><span class="o">.</span><span class="n">info</span>
<span class="gp">... </span>    <span class="n">source_reader</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">source_reader</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">source_reader</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="go">{&#39;start&#39;: 0, &#39;stop&#39;: 10, &#39;open_count&#39;: 2}</span>
<span class="go">&#39;s0&#39;</span>
<span class="go">&#39;s1&#39;</span>
<span class="go">&#39;s2&#39;</span>
</pre></div>
</div>
<dl class="py method">
<dt id="stream2py.SourceReader.close">
<em class="property">abstract </em><code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/stream2py/source_reader.html#SourceReader.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.SourceReader.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close and clean up source reader.
Will be called when StreamBuffer stops or if an exception is raised during read and append loop.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.SourceReader.get_timestamp">
<em class="property">classmethod </em><code class="sig-name descname">get_timestamp</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/stream2py/source_reader.html#SourceReader.get_timestamp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.SourceReader.get_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Get timestamp of now as int microseconds</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>timestamp in UTC microseconds</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.SourceReader.info">
<em class="property">abstract property </em><code class="sig-name descname">info</code><a class="headerlink" href="#stream2py.SourceReader.info" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict with important source info. Default can be init_kwargs and open timestamp.</p>
<p>This info will be available in BufferReader after SourceReader has opened but any changes made between open and
close are not guaranteed to be visible. Any continuous status updates should be included with read data instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.SourceReader.key">
<em class="property">abstract </em><code class="sig-name descname">key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Any</span></em><span class="sig-paren">)</span> &#x2192; ComparableType<a class="reference internal" href="_modules/stream2py/source_reader.html#SourceReader.key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.SourceReader.key" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts data into a comparable value to sort by</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – the return value of the ‘read’ method</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ComparableType</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.SourceReader.open">
<em class="property">abstract </em><code class="sig-name descname">open</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/stream2py/source_reader.html#SourceReader.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.SourceReader.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up source to be read and set some source info affected by open time like the time of open.
Will be called in StreamBuffer immediately before first read.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.SourceReader.read">
<em class="property">abstract </em><code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>Any<span class="p">]</span><a class="reference internal" href="_modules/stream2py/source_reader.html#SourceReader.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.SourceReader.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Must return data that is sortable with ‘key’ method or None. Data that is not readily sortable such as
ordered words of a sentence can be wrapped in a tuple (word_index, word).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>data or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.SourceReader.set_sleep_time_on_iter_none">
<code class="sig-name descname">set_sleep_time_on_iter_none</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sleep_time_s</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>int<span class="p">, </span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">0.001</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/source_reader.html#SourceReader.set_sleep_time_on_iter_none"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.SourceReader.set_sleep_time_on_iter_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the sleep time of the iter yield loop when next data item is not yet available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sleep_time_s</strong> – seconds to sleep</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.SourceReader.sleep_time_on_read_none_s">
<em class="property">property </em><code class="sig-name descname">sleep_time_on_read_none_s</code><a class="headerlink" href="#stream2py.SourceReader.sleep_time_on_read_none_s" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets default sleep time for StreamBuffer when it reads None from SourceReader.
Useful when you know the period between data points.</p>
<p>For example if data only comes once every 10 seconds,
it would be inefficient to try and read again every 0.1 seconds and get None up to 100 times
but every 10 seconds or even 1 second would be much more reasonable depending on the use case.
Not necessary if read is a blocking function that always returns a data point.</p>
<p>Default is None which delegates the sleep time to StreamBuffer’s default.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Optional[Union[int, float]] number of seconds to sleep</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="stream2py.StreamBuffer">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.</code><code class="sig-name descname">StreamBuffer</code><a class="reference internal" href="_modules/stream2py/stream_buffer.html#StreamBuffer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.StreamBuffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles starting and stopping SourceReader and making BufferReaders</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stream2py</span> <span class="k">import</span> <span class="n">StreamBuffer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stream2py.examples.source_reader</span> <span class="k">import</span> <span class="n">SimpleCounterString</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source_reader</span> <span class="o">=</span> <span class="n">SimpleCounterString</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream_buffer</span> <span class="o">=</span> <span class="n">StreamBuffer</span><span class="p">(</span><span class="n">source_reader</span><span class="o">=</span><span class="n">source_reader</span><span class="p">,</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream_buffer</span><span class="o">.</span><span class="n">is_running</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">stream_buffer</span><span class="o">.</span><span class="n">source_reader_info</span><span class="p">)</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream_buffer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">stream_buffer</span><span class="o">.</span><span class="n">is_running</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream_buffer</span><span class="o">.</span><span class="n">source_reader_info</span>
<span class="go">{&#39;start&#39;: 0, &#39;stop&#39;: 100, &#39;open_count&#39;: 1}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">open1_reader1</span> <span class="o">=</span> <span class="n">stream_buffer</span><span class="o">.</span><span class="n">mk_reader</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">open1_reader1</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">&#39;s0&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">open1_reader2</span> <span class="o">=</span> <span class="n">stream_buffer</span><span class="o">.</span><span class="n">mk_reader</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">open1_reader1</span><span class="o">.</span><span class="n">is_same_buffer</span><span class="p">(</span><span class="n">open1_reader2</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>  <span class="c1"># readers from the same open instance are the same</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">open1_reader1</span><span class="o">.</span><span class="n">next</span><span class="p">()</span> <span class="o">!=</span> <span class="n">open1_reader2</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>  <span class="c1"># item cursor position is different</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream_buffer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">stream_buffer</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">stream_buffer</span><span class="o">.</span><span class="n">source_reader_info</span>
<span class="gp">... </span>    <span class="n">open2_reader1</span>  <span class="o">=</span> <span class="n">stream_buffer</span><span class="o">.</span><span class="n">mk_reader</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">open2_reader2</span>  <span class="o">=</span> <span class="n">stream_buffer</span><span class="o">.</span><span class="n">mk_reader</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">assert</span> <span class="n">open2_reader1</span><span class="o">.</span><span class="n">is_same_buffer</span><span class="p">(</span><span class="n">open2_reader2</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>  <span class="c1"># readers from the same open instance are the same</span>
<span class="gp">... </span>    <span class="k">assert</span> <span class="n">open2_reader1</span><span class="o">.</span><span class="n">is_same_buffer</span><span class="p">(</span><span class="n">open1_reader1</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">False</span>  <span class="c1"># readers from the different open instances</span>
<span class="go">{&#39;start&#39;: 0, &#39;stop&#39;: 100, &#39;open_count&#39;: 2}</span>
</pre></div>
</div>
<dl class="py method">
<dt id="stream2py.StreamBuffer.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source_reader</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#stream2py.source_reader.SourceReader" title="stream2py.source_reader.SourceReader">stream2py.source_reader.SourceReader</a></span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">maxlen</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">sleep_time_on_read_none_s</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Union<span class="p">[</span>int<span class="p">, </span>float<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">auto_drop</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/stream_buffer.html#StreamBuffer.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.StreamBuffer.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO: option to auto restart source on read exception</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source_reader</strong> – instance of a SourceReader subclass</p></li>
<li><p><strong>maxlen</strong> – max number of read data points to store in buffer before data starts dropping off the queue</p></li>
<li><p><strong>sleep_time_on_read_none_s</strong> – Seconds to sleep when reading None from source_reader. None to use defaults.</p></li>
<li><p><strong>auto_drop</strong> – False to stop reading when buffer is full and use StreamBuffer.drop() to manually make space.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.StreamBuffer.drop">
<code class="sig-name descname">drop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/stream_buffer.html#StreamBuffer.drop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.StreamBuffer.drop" title="Permalink to this definition">¶</a></dt>
<dd><p>Manually drop items from buffer when auto_drop is False</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>n</strong> – number of items to drop from the left side</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.StreamBuffer.is_running">
<em class="property">property </em><code class="sig-name descname">is_running</code><a class="headerlink" href="#stream2py.StreamBuffer.is_running" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if stop event has been set.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.StreamBuffer.mk_reader">
<code class="sig-name descname">mk_reader</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#stream2py.buffer_reader.BufferReader" title="stream2py.buffer_reader.BufferReader">stream2py.buffer_reader.BufferReader</a><a class="reference internal" href="_modules/stream2py/stream_buffer.html#StreamBuffer.mk_reader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.StreamBuffer.mk_reader" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a BufferReader instance for the currently running  StreamBuffer.
Reader must be made after start() to have data from said start.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>BufferReader instance</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.StreamBuffer.source_reader_info">
<em class="property">property </em><code class="sig-name descname">source_reader_info</code><a class="headerlink" href="#stream2py.StreamBuffer.source_reader_info" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict with important source info set by SourceReader.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.StreamBuffer.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/stream_buffer.html#StreamBuffer.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.StreamBuffer.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Open and start reading from source_reader into buffer</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.StreamBuffer.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/stream_buffer.html#StreamBuffer.stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.StreamBuffer.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop reading and close source_reader</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="stream2py.BufferReader">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.</code><code class="sig-name descname">BufferReader</code><a class="reference internal" href="_modules/stream2py/buffer_reader.html#BufferReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.BufferReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Reader that is constructed from StreamBuffer.mk_reader()</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stream2py</span> <span class="k">import</span> <span class="n">StreamBuffer</span><span class="p">,</span> <span class="n">BufferReader</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stream2py.examples.source_reader</span> <span class="k">import</span> <span class="n">SimpleCounterString</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source_reader</span> <span class="o">=</span> <span class="n">SimpleCounterString</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream_buffer</span> <span class="o">=</span> <span class="n">StreamBuffer</span><span class="p">(</span><span class="n">source_reader</span><span class="o">=</span><span class="n">source_reader</span><span class="p">,</span> <span class="n">maxlen</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream_buffer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span> <span class="o">=</span> <span class="n">stream_buffer</span><span class="o">.</span><span class="n">mk_reader</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">buffer_reader</span><span class="p">,</span> <span class="n">BufferReader</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">is_stopped</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_item</span> <span class="o">==</span> <span class="kc">None</span>  <span class="c1"># None until value is seen</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">next</span><span class="p">()</span> <span class="c1"># get first item</span>
<span class="go">&#39;s0&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_item</span> <span class="c1"># check last_item cursor</span>
<span class="go">&#39;s0&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">next</span><span class="p">(</span><span class="n">peek</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_item</span> <span class="c1"># next will not update last_item cursor</span>
<span class="go">(&#39;s1&#39;, &#39;s0&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">next</span><span class="p">(),</span> <span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_item</span> <span class="c1"># same as what was peeked but now cursor is updated</span>
<span class="go">(&#39;s1&#39;, &#39;s1&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="go">[&#39;s5&#39;, &#39;s6&#39;, &#39;s7&#39;, &#39;s8&#39;, &#39;s9&#39;, &#39;s10&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_item</span>
<span class="go">&#39;s10&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span> <span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_item</span>
<span class="go">([&#39;s5&#39;, &#39;s8&#39;], &#39;s8&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">peek</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[&#39;s10&#39;, &#39;s11&#39;, &#39;s12&#39;, &#39;s13&#39;, &#39;s14&#39;, &#39;s15&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_item</span> <span class="c1"># unchanged with peek</span>
<span class="go">&#39;s8&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_key</span> <span class="c1"># key of last_item</span>
<span class="go">8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">only_new_items</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># only 9 is greater than last item key</span>
<span class="go">[&#39;s9&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_item</span><span class="p">,</span> <span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_key</span>
<span class="go">(&#39;s0&#39;, &#39;s0&#39;, 0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">tail</span><span class="p">(),</span> <span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_item</span><span class="p">,</span> <span class="n">buffer_reader</span><span class="o">.</span><span class="n">last_key</span>
<span class="go">(&#39;s99&#39;, &#39;s99&#39;, 99)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream_buffer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer_reader</span><span class="o">.</span><span class="n">is_stopped</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="py method">
<dt id="stream2py.BufferReader.is_same_buffer">
<code class="sig-name descname">is_same_buffer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other_buffer_reader</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/buffer_reader.html#BufferReader.is_same_buffer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.BufferReader.is_same_buffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if reader is looking at the same buffer</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.BufferReader.is_stopped">
<em class="property">property </em><code class="sig-name descname">is_stopped</code><a class="headerlink" href="#stream2py.BufferReader.is_stopped" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if stop event has been set by StreamBuffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.BufferReader.last_item">
<em class="property">property </em><code class="sig-name descname">last_item</code><a class="headerlink" href="#stream2py.BufferReader.last_item" title="Permalink to this definition">¶</a></dt>
<dd><p>last seen item cursor</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.BufferReader.last_key">
<em class="property">property </em><code class="sig-name descname">last_key</code><a class="headerlink" href="#stream2py.BufferReader.last_key" title="Permalink to this definition">¶</a></dt>
<dd><p>key to last seen item cursor</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.BufferReader.next">
<code class="sig-name descname">next</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">peek</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ignore_no_item_found</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/buffer_reader.html#BufferReader.next"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.BufferReader.next" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds an item with a key greater than the last returned item.
Raise ValueError if no item found with key above last item.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>peek</strong> – if True, last_item cursor will not be updated</p></li>
<li><p><strong>ignore_no_item_found</strong> – if True, return None when no next item instead of raising exception</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>next item</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.BufferReader.range">
<code class="sig-name descname">range</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start</span></em>, <em class="sig-param"><span class="n">stop</span></em>, <em class="sig-param"><span class="n">step</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">peek</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ignore_no_item_found</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">only_new_items</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/buffer_reader.html#BufferReader.range"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.BufferReader.range" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables:
1. Get last n minutes
2. Give me data I don’t have</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> – starting range key of item inclusive</p></li>
<li><p><strong>stop</strong> – ending range key of item inclusive</p></li>
<li><p><strong>step</strong> – </p></li>
<li><p><strong>peek</strong> – if True, last_item cursor will not be updated</p></li>
<li><p><strong>ignore_no_item_found</strong> – if True, return None when no next item instead of raising exception</p></li>
<li><p><strong>only_new_items</strong> – if True and no new items, raise ValueError or return None if ignore_no_item_found</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of items in range</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.BufferReader.set_sleep_time_on_iter_none">
<code class="sig-name descname">set_sleep_time_on_iter_none</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sleep_time_s</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>int<span class="p">, </span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">0.1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/buffer_reader.html#BufferReader.set_sleep_time_on_iter_none"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.BufferReader.set_sleep_time_on_iter_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the sleep time of the iter yield loop when next data item is not yet available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sleep_time_s</strong> – seconds to sleep</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.BufferReader.source_reader_info">
<em class="property">property </em><code class="sig-name descname">source_reader_info</code><a class="headerlink" href="#stream2py.BufferReader.source_reader_info" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict with important source info set by SourceReader.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.BufferReader.tail">
<code class="sig-name descname">tail</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">peek</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ignore_no_item_found</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">only_new_items</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/buffer_reader.html#BufferReader.tail"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.BufferReader.tail" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the last item in buffer. Raise ValueError if no item found.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>peek</strong> – if True, last_item cursor will not be updated</p></li>
<li><p><strong>ignore_no_item_found</strong> – if True, return None when no next item instead of raising exception</p></li>
<li><p><strong>only_new_items</strong> – if True and no new items, raise ValueError or return None if ignore_no_item_found</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tail item</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<div class="admonition-todo admonition" id="id20">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>doctest for each exposed method with sphinx.ext.doctest’s testsetup and testcleanup to clearly show usage</p></li>
<li><p>reduce the complexity of the main doctest of each class</p></li>
</ul>
</div>
</div>
</div>
</div>
<div class="section" id="stream2py-utility-locked-sorted-deque">
<h1>stream2py.utility.locked_sorted_deque<a class="headerlink" href="#stream2py-utility-locked-sorted-deque" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.utility.locked_sorted_deque"></span><dl class="py class">
<dt id="stream2py.utility.locked_sorted_deque.RWLockSortedDeque">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.utility.locked_sorted_deque.</code><code class="sig-name descname">RWLockSortedDeque</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">iterable</span><span class="o">=</span><span class="default_value">()</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">maxlen</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/locked_sorted_deque.html#RWLockSortedDeque"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.locked_sorted_deque.RWLockSortedDeque" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">operator</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">locked_deque</span> <span class="o">=</span> <span class="n">RWLockSortedDeque</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">(((</span><span class="s1">&#39;plc&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">i</span> <span class="o">//</span> <span class="mi">10</span> <span class="o">*</span> <span class="mi">10</span><span class="p">),</span> <span class="n">i</span><span class="p">),</span> <span class="n">f</span><span class="s1">&#39;data_</span><span class="si">{i}</span><span class="s1">&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="n">key</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">maxlen</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_item</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;plc&#39;</span><span class="p">,</span> <span class="mi">100000</span><span class="p">,</span> <span class="mi">100000</span><span class="p">),</span> <span class="s1">&#39;new data&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">locked_deque</span><span class="o">.</span><span class="n">writer_lock</span><span class="p">()</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">writer</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_item</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">locked_deque</span><span class="o">.</span><span class="n">reader_lock</span><span class="p">()</span> <span class="k">as</span> <span class="n">reader</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">find_gt</span><span class="p">((</span><span class="s1">&#39;plc&#39;</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">91</span><span class="p">)))</span>
<span class="gp">...</span>
<span class="go">((&#39;plc&#39;, 90, 92), &#39;data_92&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">locked_deque</span><span class="o">.</span><span class="n">reader_lock</span><span class="p">()</span> <span class="k">as</span> <span class="n">reader</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">find_gt</span><span class="p">((</span><span class="s1">&#39;plc&#39;</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">99</span><span class="p">)))</span>
<span class="gp">...</span>
<span class="go">((&#39;plc&#39;, 100000, 100000), &#39;new data&#39;)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="stream2py-utility-reader-writer-lock">
<h1>stream2py.utility.reader_writer_lock<a class="headerlink" href="#stream2py-utility-reader-writer-lock" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.utility.reader_writer_lock"></span><dl class="py class">
<dt id="stream2py.utility.reader_writer_lock.RWLock">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.utility.reader_writer_lock.</code><code class="sig-name descname">RWLock</code><a class="reference internal" href="_modules/stream2py/utility/reader_writer_lock.html#RWLock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.reader_writer_lock.RWLock" title="Permalink to this definition">¶</a></dt>
<dd><p>Synchronization object used in a solution of so-called second
readers-writers problem. In this problem, many readers can simultaneously
access a share, and a writer has an exclusive access to this share.
Additionally, the following constraints should be met:
1) no reader should be kept waiting if the share is currently opened for</p>
<blockquote>
<div><p>reading unless a writer is also waiting for the share,</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><dl class="simple">
<dt>no writer should be kept waiting for the share longer than absolutely</dt><dd><p>necessary.</p>
</dd>
</dl>
</li>
</ol>
<p>The implementation is based on [1, secs. 4.2.2, 4.2.6, 4.2.7]
with a modification – adding an additional lock (C{self.__readers_queue})
– in accordance with [2].</p>
<p>Sources:
[1] A.B. Downey: “The little book of semaphores”, Version 2.1.5, 2008
[2] P.J. Courtois, F. Heymans, D.L. Parnas:</p>
<blockquote>
<div><p>“Concurrent Control with ‘Readers’ and ‘Writers’”,
Communications of the ACM, 1971 (via [3])</p>
</div></blockquote>
<p>[3] <a class="reference external" href="http://en.wikipedia.org/wiki/Readers-writers_problem">http://en.wikipedia.org/wiki/Readers-writers_problem</a></p>
</dd></dl>

<dl class="py class">
<dt id="stream2py.utility.reader_writer_lock.RWLockTestCase">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.utility.reader_writer_lock.</code><code class="sig-name descname">RWLockTestCase</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">methodName</span><span class="o">=</span><span class="default_value">'runTest'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/reader_writer_lock.html#RWLockTestCase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.reader_writer_lock.RWLockTestCase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="stream2py.utility.reader_writer_lock.Reader">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.utility.reader_writer_lock.</code><code class="sig-name descname">Reader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer_</span></em>, <em class="sig-param"><span class="n">rw_lock</span></em>, <em class="sig-param"><span class="n">init_sleep_time</span></em>, <em class="sig-param"><span class="n">sleep_time</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/reader_writer_lock.html#Reader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.reader_writer_lock.Reader" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt id="stream2py.utility.reader_writer_lock.Reader.buffer_read">
<code class="sig-name descname">buffer_read</code><a class="headerlink" href="#stream2py.utility.reader_writer_lock.Reader.buffer_read" title="Permalink to this definition">¶</a></dt>
<dd><p>a copy of a the buffer read while in critical section</p>
</dd></dl>

<dl class="py attribute">
<dt id="stream2py.utility.reader_writer_lock.Reader.entry_time">
<code class="sig-name descname">entry_time</code><a class="headerlink" href="#stream2py.utility.reader_writer_lock.Reader.entry_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Time of entry to the critical section</p>
</dd></dl>

<dl class="py attribute">
<dt id="stream2py.utility.reader_writer_lock.Reader.exit_time">
<code class="sig-name descname">exit_time</code><a class="headerlink" href="#stream2py.utility.reader_writer_lock.Reader.exit_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Time of exit from the critical section</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.utility.reader_writer_lock.Reader.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/reader_writer_lock.html#Reader.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.reader_writer_lock.Reader.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Method representing the thread’s activity.</p>
<p>You may override this method in a subclass. The standard run() method
invokes the callable object passed to the object’s constructor as the
target argument, if any, with sequential and keyword arguments taken
from the args and kwargs arguments, respectively.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="stream2py.utility.reader_writer_lock.Writer">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.utility.reader_writer_lock.</code><code class="sig-name descname">Writer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer_</span></em>, <em class="sig-param"><span class="n">rw_lock</span></em>, <em class="sig-param"><span class="n">init_sleep_time</span></em>, <em class="sig-param"><span class="n">sleep_time</span></em>, <em class="sig-param"><span class="n">to_write</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/reader_writer_lock.html#Writer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.reader_writer_lock.Writer" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt id="stream2py.utility.reader_writer_lock.Writer.entry_time">
<code class="sig-name descname">entry_time</code><a class="headerlink" href="#stream2py.utility.reader_writer_lock.Writer.entry_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Time of entry to the critical section</p>
</dd></dl>

<dl class="py attribute">
<dt id="stream2py.utility.reader_writer_lock.Writer.exit_time">
<code class="sig-name descname">exit_time</code><a class="headerlink" href="#stream2py.utility.reader_writer_lock.Writer.exit_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Time of exit from the critical section</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.utility.reader_writer_lock.Writer.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/reader_writer_lock.html#Writer.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.reader_writer_lock.Writer.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Method representing the thread’s activity.</p>
<p>You may override this method in a subclass. The standard run() method
invokes the callable object passed to the object’s constructor as the
target argument, if any, with sequential and keyword arguments taken
from the args and kwargs arguments, respectively.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="stream2py-utility">
<h1>stream2py.utility<a class="headerlink" href="#stream2py-utility" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.utility"></span></div>
<div class="section" id="stream2py-utility-getch">
<h1>stream2py.utility.getch<a class="headerlink" href="#stream2py-utility-getch" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.utility.getch"></span></div>
<div class="section" id="stream2py-utility-typing-hints">
<h1>stream2py.utility.typing_hints<a class="headerlink" href="#stream2py-utility-typing-hints" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.utility.typing_hints"></span><dl class="py class">
<dt id="stream2py.utility.typing_hints.Comparable">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.utility.typing_hints.</code><code class="sig-name descname">Comparable</code><a class="reference internal" href="_modules/stream2py/utility/typing_hints.html#Comparable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.typing_hints.Comparable" title="Permalink to this definition">¶</a></dt>
<dd><p>Comparable is any object that implements “less than” and “greater than” comparisons</p>
</dd></dl>

</div>
<div class="section" id="stream2py-utility-sorted-collection">
<h1>stream2py.utility.sorted_collection<a class="headerlink" href="#stream2py-utility-sorted-collection" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.utility.sorted_collection"></span><dl class="py class">
<dt id="stream2py.utility.sorted_collection.SortedCollection">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.utility.sorted_collection.</code><code class="sig-name descname">SortedCollection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">iterable</span><span class="o">=</span><span class="default_value">()</span></em>, <em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/sorted_collection.html#SortedCollection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.sorted_collection.SortedCollection" title="Permalink to this definition">¶</a></dt>
<dd><p>Sequence sorted by a key function.</p>
<p>SortedCollection() is much easier to work with than using bisect() directly.
It supports key functions like those use in sorted(), min(), and max().
The result of the key function call is saved so that keys can be searched
efficiently.</p>
<p>Instead of returning an insertion-point which can be hard to interpret, the
five find-methods return a specific item in the sequence. They can scan for
exact matches, the last item less-than-or-equal to a key, or the first item
greater-than-or-equal to a key.</p>
<p>Once found, an item’s ordinal position can be located with the index() method.
New items can be added with the insert() and insert_right() methods.
Old items can be deleted with the remove() method.</p>
<p>The usual sequence methods are provided to support indexing, slicing,
length lookup, clearing, copying, forward and reverse iteration, contains
checking, item counts, item removal, and a nice looking repr.</p>
<p>Finding and indexing are O(log n) operations while iteration and insertion
are O(n).  The initial sort is O(n log n).</p>
<p>The key function is stored in the ‘key’ attibute for easy introspection or
so that you can assign a new key function (triggering an automatic re-sort).</p>
<p>In short, the class was designed to handle all of the common use cases for
bisect but with a simpler API and support for key functions.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="k">import</span> <span class="n">pprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">operator</span> <span class="k">import</span> <span class="n">itemgetter</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">SortedCollection</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="p">[</span>
<span class="gp">... </span>        <span class="p">(</span><span class="s1">&#39;roger&#39;</span><span class="p">,</span> <span class="s1">&#39;young&#39;</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
<span class="gp">... </span>        <span class="p">(</span><span class="s1">&#39;angela&#39;</span><span class="p">,</span> <span class="s1">&#39;jones&#39;</span><span class="p">,</span> <span class="mi">28</span><span class="p">),</span>
<span class="gp">... </span>        <span class="p">(</span><span class="s1">&#39;bill&#39;</span><span class="p">,</span> <span class="s1">&#39;smith&#39;</span><span class="p">,</span> <span class="mi">22</span><span class="p">),</span>
<span class="gp">... </span>        <span class="p">(</span><span class="s1">&#39;david&#39;</span><span class="p">,</span> <span class="s1">&#39;thomas&#39;</span><span class="p">,</span> <span class="mi">32</span><span class="p">)]:</span>
<span class="gp">... </span>    <span class="n">s</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>         <span class="c1"># show records sorted by age</span>
<span class="go">[(&#39;bill&#39;, &#39;smith&#39;, 22),</span>
<span class="go"> (&#39;angela&#39;, &#39;jones&#39;, 28),</span>
<span class="go"> (&#39;roger&#39;, &#39;young&#39;, 30),</span>
<span class="go"> (&#39;david&#39;, &#39;thomas&#39;, 32)]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">find_le</span><span class="p">(</span><span class="mi">29</span><span class="p">)</span>           <span class="c1"># find oldest person aged 29 or younger</span>
<span class="go">(&#39;angela&#39;, &#39;jones&#39;, 28)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">find_lt</span><span class="p">(</span><span class="mi">28</span><span class="p">)</span>           <span class="c1"># find oldest person under 28</span>
<span class="go">(&#39;bill&#39;, &#39;smith&#39;, 22)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">find_gt</span><span class="p">(</span><span class="mi">28</span><span class="p">)</span>           <span class="c1"># find youngest person over 28</span>
<span class="go">(&#39;roger&#39;, &#39;young&#39;, 30)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find_ge</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>       <span class="c1"># find youngest person aged 32 or older</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>              <span class="c1"># get the index of their record</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>                    <span class="c1"># fetch the record at that index</span>
<span class="go">(&#39;david&#39;, &#39;thomas&#39;, 32)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>   <span class="c1"># now sort by first name</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="go">[(&#39;angela&#39;, &#39;jones&#39;, 28),</span>
<span class="go"> (&#39;bill&#39;, &#39;smith&#39;, 22),</span>
<span class="go"> (&#39;david&#39;, &#39;thomas&#39;, 32),</span>
<span class="go"> (&#39;roger&#39;, &#39;young&#39;, 30)]</span>
</pre></div>
</div>
<dl class="py method">
<dt id="stream2py.utility.sorted_collection.SortedCollection.count">
<code class="sig-name descname">count</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/sorted_collection.html#SortedCollection.count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.sorted_collection.SortedCollection.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Return number of occurrences of item</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.utility.sorted_collection.SortedCollection.find">
<code class="sig-name descname">find</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">k</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/sorted_collection.html#SortedCollection.find"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.sorted_collection.SortedCollection.find" title="Permalink to this definition">¶</a></dt>
<dd><p>Return first item with a key == k.  Raise ValueError if not found.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.utility.sorted_collection.SortedCollection.find_ge">
<code class="sig-name descname">find_ge</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">k</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/sorted_collection.html#SortedCollection.find_ge"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.sorted_collection.SortedCollection.find_ge" title="Permalink to this definition">¶</a></dt>
<dd><p>Return first item with a key &gt;= equal to k.  Raise ValueError if not found</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.utility.sorted_collection.SortedCollection.find_gt">
<code class="sig-name descname">find_gt</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">k</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/sorted_collection.html#SortedCollection.find_gt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.sorted_collection.SortedCollection.find_gt" title="Permalink to this definition">¶</a></dt>
<dd><p>Return first item with a key &gt; k.  Raise ValueError if not found</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.utility.sorted_collection.SortedCollection.find_le">
<code class="sig-name descname">find_le</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">k</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/sorted_collection.html#SortedCollection.find_le"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.sorted_collection.SortedCollection.find_le" title="Permalink to this definition">¶</a></dt>
<dd><p>Return last item with a key &lt;= k.  Raise ValueError if not found.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.utility.sorted_collection.SortedCollection.find_lt">
<code class="sig-name descname">find_lt</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">k</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/sorted_collection.html#SortedCollection.find_lt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.sorted_collection.SortedCollection.find_lt" title="Permalink to this definition">¶</a></dt>
<dd><p>Return last item with a key &lt; k.  Raise ValueError if not found.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.utility.sorted_collection.SortedCollection.index">
<code class="sig-name descname">index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/sorted_collection.html#SortedCollection.index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.sorted_collection.SortedCollection.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the position of an item.  Raise ValueError if not found.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.utility.sorted_collection.SortedCollection.insert">
<code class="sig-name descname">insert</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/sorted_collection.html#SortedCollection.insert"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.sorted_collection.SortedCollection.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert a new item.  If equal keys are found, add to the left</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.utility.sorted_collection.SortedCollection.insert_right">
<code class="sig-name descname">insert_right</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/sorted_collection.html#SortedCollection.insert_right"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.sorted_collection.SortedCollection.insert_right" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert a new item.  If equal keys are found, add to the right</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.utility.sorted_collection.SortedCollection.key">
<em class="property">property </em><code class="sig-name descname">key</code><a class="headerlink" href="#stream2py.utility.sorted_collection.SortedCollection.key" title="Permalink to this definition">¶</a></dt>
<dd><p>key function</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.utility.sorted_collection.SortedCollection.remove">
<code class="sig-name descname">remove</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/sorted_collection.html#SortedCollection.remove"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.sorted_collection.SortedCollection.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove first occurence of item.  Raise ValueError if not found</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="stream2py-utility-logger">
<h1>stream2py.utility.logger<a class="headerlink" href="#stream2py-utility-logger" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.utility.logger"></span></div>
<div class="section" id="stream2py-utility-sorted-deque">
<h1>stream2py.utility.sorted_deque<a class="headerlink" href="#stream2py-utility-sorted-deque" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.utility.sorted_deque"></span><dl class="py class">
<dt id="stream2py.utility.sorted_deque.SortedDeque">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.utility.sorted_deque.</code><code class="sig-name descname">SortedDeque</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">iterable</span><span class="o">=</span><span class="default_value">()</span></em>, <em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">maxlen</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/sorted_deque.html#SortedDeque"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.sorted_deque.SortedDeque" title="Permalink to this definition">¶</a></dt>
<dd><p>Deque sorted by a key function.</p>
<p>Intent of SortedDeque is to efficiently search buffered data while efficiently maintaining a fixed length buffer
that is frequently popping the head and appending to the tail.</p>
<p>Overloaded SortedCollection methods __contains__, index, and count due to the lack of
slicing in deques. Efficiency of said methods is still better than base deque.</p>
<p>Added an append method for cases where the new item to insert is known to be the last.</p>
<dl class="py method">
<dt id="stream2py.utility.sorted_deque.SortedDeque.append">
<code class="sig-name descname">append</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/sorted_deque.html#SortedDeque.append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.sorted_deque.SortedDeque.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Append item to the end.  Raise ValueError if item key is less than last item key</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.utility.sorted_deque.SortedDeque.count">
<code class="sig-name descname">count</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/sorted_deque.html#SortedDeque.count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.sorted_deque.SortedDeque.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Return number of occurrences of item</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.utility.sorted_deque.SortedDeque.drop">
<code class="sig-name descname">drop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/sorted_deque.html#SortedDeque.drop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.sorted_deque.SortedDeque.drop" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove n items from the left</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>n</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.utility.sorted_deque.SortedDeque.find_last_gt">
<code class="sig-name descname">find_last_gt</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">k</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/sorted_deque.html#SortedDeque.find_last_gt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.sorted_deque.SortedDeque.find_last_gt" title="Permalink to this definition">¶</a></dt>
<dd><p>Return last item with a key &gt; k.  Raise ValueError if not found.
Basically a tail function with a greater than check</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.utility.sorted_deque.SortedDeque.index">
<code class="sig-name descname">index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/sorted_deque.html#SortedDeque.index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.sorted_deque.SortedDeque.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the position of an item.  Raise ValueError if not found.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.utility.sorted_deque.SortedDeque.maxlen">
<em class="property">property </em><code class="sig-name descname">maxlen</code><a class="headerlink" href="#stream2py.utility.sorted_deque.SortedDeque.maxlen" title="Permalink to this definition">¶</a></dt>
<dd><p>maxlen function</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.utility.sorted_deque.SortedDeque.range">
<code class="sig-name descname">range</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start</span></em>, <em class="sig-param"><span class="n">stop</span></em>, <em class="sig-param"><span class="n">step</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/sorted_deque.html#SortedDeque.range"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.sorted_deque.SortedDeque.range" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> – starting key</p></li>
<li><p><strong>stop</strong> – stopping key</p></li>
<li><p><strong>step</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list with items in range</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.utility.sorted_deque.SortedDeque.to_jdict">
<code class="sig-name descname">to_jdict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/utility/sorted_deque.html#SortedDeque.to_jdict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.utility.sorted_deque.SortedDeque.to_jdict" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO: WIP. Need to convert key function and iterable items to json friendly format</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="stream2py-sources-video">
<h1>stream2py.sources.video<a class="headerlink" href="#stream2py-sources-video" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.sources.video"></span><dl class="py class">
<dt id="stream2py.sources.video.VideoCapture">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.video.</code><code class="sig-name descname">VideoCapture</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">video_input</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/video.html#VideoCapture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.video.VideoCapture" title="Permalink to this definition">¶</a></dt>
<dd><p>Video Capture using OpenCV</p>
<dl class="py method">
<dt id="stream2py.sources.video.VideoCapture.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/stream2py/sources/video.html#VideoCapture.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.video.VideoCapture.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close and clean up source reader.
Will be called when StreamBuffer stops or if an exception is raised during read and append loop.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.video.VideoCapture.info">
<em class="property">property </em><code class="sig-name descname">info</code><a class="headerlink" href="#stream2py.sources.video.VideoCapture.info" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict with important source info. Default can be init_kwargs and open timestamp.</p>
<p>This info will be available in BufferReader after SourceReader has opened but any changes made between open and
close are not guaranteed to be visible. Any continuous status updates should be included with read data instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.video.VideoCapture.key">
<code class="sig-name descname">key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span> &#x2192; ComparableType<a class="reference internal" href="_modules/stream2py/sources/video.html#VideoCapture.key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.video.VideoCapture.key" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – (timestamp, ret, frame)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>timestamp</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.video.VideoCapture.open">
<code class="sig-name descname">open</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/stream2py/sources/video.html#VideoCapture.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.video.VideoCapture.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up source to be read and set some source info affected by open time like the time of open.
Will be called in StreamBuffer immediately before first read.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.video.VideoCapture.read">
<code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>Any<span class="p">]</span><a class="reference internal" href="_modules/stream2py/sources/video.html#VideoCapture.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.video.VideoCapture.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Must return data that is sortable with ‘key’ method or None. Data that is not readily sortable such as
ordered words of a sentence can be wrapped in a tuple (word_index, word).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>data or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.video.VideoCapture.video_input_info">
<em class="property">classmethod </em><code class="sig-name descname">video_input_info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">video_input</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>int<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="_modules/stream2py/sources/video.html#VideoCapture.video_input_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.video.VideoCapture.video_input_info" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference external" href="https://docs.opencv.org/4.2.0/d4/d15/group__videoio__flags__base.html#gaeb8dd9c89c10a5c63c139bf7c4f5704d">https://docs.opencv.org/4.2.0/d4/d15/group__videoio__flags__base.html#gaeb8dd9c89c10a5c63c139bf7c4f5704d</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>video_input</strong> – filename or device id, see cv2.VideoCapture documentation for more info</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
<div class="admonition-todo admonition" id="id21">
<p class="admonition-title">Todo</p>
<p>filter for useful info</p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="stream2py-sources-audio">
<h1>stream2py.sources.audio<a class="headerlink" href="#stream2py-sources-audio" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.sources.audio"></span><div class="section" id="pyaudio-source">
<h2>PyAudio Source<a class="headerlink" href="#pyaudio-source" title="Permalink to this headline">¶</a></h2>
<p>This source requires PyAudio.
<a class="reference external" href="https://people.csail.mit.edu/hubert/pyaudio/">Find PyAudio installation instructions here</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">PyAudio</span>
</pre></div>
</div>
<dl class="py class">
<dt id="stream2py.sources.audio.PyAudioSourceReader">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.audio.</code><code class="sig-name descname">PyAudioSourceReader</code><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.audio.PyAudioSourceReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stream2py.source_reader.SourceReader" title="stream2py.source_reader.SourceReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">stream2py.source_reader.SourceReader</span></code></a></p>
<dl class="py method">
<dt id="stream2py.sources.audio.PyAudioSourceReader.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">rate</span><span class="o">=</span><span class="default_value">44100</span></em>, <em class="sig-param"><span class="n">width</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">unsigned</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">channels</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">input_device_index</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">frames_per_buffer</span><span class="o">=</span><span class="default_value">1024</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.audio.PyAudioSourceReader.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rate</strong> – Specifies the desired sample rate (in Hz)</p></li>
<li><p><strong>width</strong> – Sample width in bytes (1, 2, 3, or 4)</p></li>
<li><p><strong>unsigned</strong> – For 1 byte width, specifies signed or unsigned format. Ignored if byte width is not 1.</p></li>
<li><p><strong>channels</strong> – The desired number of input channels. Ignored if input_device is not specified (or None).</p></li>
<li><p><strong>input_device_index</strong> – Index of Input Device to use. Unspecified (or None) uses default device.</p></li>
<li><p><strong>frames_per_buffer</strong> – Specifies the number of frames per buffer.</p></li>
</ul>
</dd>
</dl>
<div class="admonition-todo admonition" id="id22">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>option to get input device by name instead of index and warn of duplicate names or missing</p></li>
<li><p>input_device_index is used by info and must be found and filled into _init_kwargs if looking up by name</p></li>
<li><p>warn if index does not match name when both name and index are specified</p></li>
<li><p>option to get input from file</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.audio.PyAudioSourceReader.audio_buffer_size_seconds_to_maxlen">
<em class="property">static </em><code class="sig-name descname">audio_buffer_size_seconds_to_maxlen</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer_size_seconds</span></em>, <em class="sig-param"><span class="n">rate</span></em>, <em class="sig-param"><span class="n">frames_per_buffer</span></em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.audio_buffer_size_seconds_to_maxlen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.audio.PyAudioSourceReader.audio_buffer_size_seconds_to_maxlen" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate maxlen for StreamBuffer to keep a minimum of buffer_size_seconds of data on buffer</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buffer_size_seconds</strong> – desired length of StreamBuffer in seconds</p></li>
<li><p><strong>rate</strong> – sample rate</p></li>
<li><p><strong>frames_per_buffer</strong> – number of frames per buffer</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>maxlen for StreamBuffer</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.audio.PyAudioSourceReader.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.audio.PyAudioSourceReader.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop audio stream</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.audio.PyAudioSourceReader.data_to_append">
<code class="sig-name descname">data_to_append</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timestamp</span></em>, <em class="sig-param"><span class="n">waveform</span></em>, <em class="sig-param"><span class="n">frame_count</span></em>, <em class="sig-param"><span class="n">time_info</span></em>, <em class="sig-param"><span class="n">status_flags</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.data_to_append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.audio.PyAudioSourceReader.data_to_append" title="Permalink to this definition">¶</a></dt>
<dd><p>Can to be overloaded to change the shape of read outputs by altering the return value.
The key function must also be overloaded to return timestamp from the new shape.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamp</strong> – start time of waveform</p></li>
<li><p><strong>waveform</strong> – recorded input data</p></li>
<li><p><strong>frame_count</strong> – number of frames, sample count</p></li>
<li><p><strong>time_info</strong> – dict, see <a class="reference external" href="http://portaudio.com/docs/v19-doxydocs/structPaStreamCallbackTimeInfo.html">http://portaudio.com/docs/v19-doxydocs/structPaStreamCallbackTimeInfo.html</a></p></li>
<li><p><strong>status_flags</strong> – PaStatusFlags</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(timestamp, waveform, frame_count, time_info, status_flags)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.audio.PyAudioSourceReader.info">
<em class="property">property </em><code class="sig-name descname">info</code><a class="headerlink" href="#stream2py.sources.audio.PyAudioSourceReader.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a dict with init kwargs, bt, and device info</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stream2py.sources.audio</span> <span class="k">import</span> <span class="n">PyAudioSourceReader</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="k">import</span> <span class="n">pprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source</span> <span class="o">=</span> <span class="n">PyAudioSourceReader</span><span class="p">(</span><span class="n">rate</span><span class="o">=</span><span class="mi">44100</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">channels</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">input_device_index</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">frames_per_buffer</span><span class="o">=</span><span class="mi">4096</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">info</span><span class="p">)</span> 
<span class="go">{&#39;bt&#39;: 1582851038965183,</span>
<span class="go"> &#39;channels&#39;: 1,</span>
<span class="go"> &#39;device_info&#39;: {&#39;defaultHighInputLatency&#39;: 0.021333333333333333,</span>
<span class="go">                 &#39;defaultHighOutputLatency&#39;: 0.021333333333333333,</span>
<span class="go">                 &#39;defaultLowInputLatency&#39;: 0.021333333333333333,</span>
<span class="go">                 &#39;defaultLowOutputLatency&#39;: 0.021333333333333333,</span>
<span class="go">                 &#39;defaultSampleRate&#39;: 48000.0,</span>
<span class="go">                 &#39;hostApi&#39;: 0,</span>
<span class="go">                 &#39;index&#39;: 7,</span>
<span class="go">                 &#39;maxInputChannels&#39;: 128,</span>
<span class="go">                 &#39;maxOutputChannels&#39;: 128,</span>
<span class="go">                 &#39;name&#39;: &#39;sysdefault&#39;,</span>
<span class="go">                 &#39;structVersion&#39;: 2},</span>
<span class="go"> &#39;frames_per_buffer&#39;: 4096,</span>
<span class="go"> &#39;input_device_index&#39;: 7,</span>
<span class="go"> &#39;rate&#39;: 44100,</span>
<span class="go"> &#39;unsigned&#39;: True,</span>
<span class="go"> &#39;width&#39;: 2}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.audio.PyAudioSourceReader.key">
<code class="sig-name descname">key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span> &#x2192; ComparableType<a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.audio.PyAudioSourceReader.key" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – (timestamp, waveform, frame_count, time_info, status_flags)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>timestamp</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.audio.PyAudioSourceReader.list_device_info">
<em class="property">classmethod </em><code class="sig-name descname">list_device_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>dict<span class="p">]</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.list_device_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.audio.PyAudioSourceReader.list_device_info" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition-todo admonition" id="id23">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>filter for only devices with input channels</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.audio.PyAudioSourceReader.open">
<code class="sig-name descname">open</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.audio.PyAudioSourceReader.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Will first close if already open and clear any data before starting the audio stream</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.audio.PyAudioSourceReader.read">
<code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.audio.PyAudioSourceReader.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns one data item as structured by PyAudioSourceReader.data_to_append</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(timestamp, waveform, frame_count, time_info, status_flags)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.audio.PyAudioSourceReader.sleep_time_on_read_none_s">
<em class="property">property </em><code class="sig-name descname">sleep_time_on_read_none_s</code><a class="headerlink" href="#stream2py.sources.audio.PyAudioSourceReader.sleep_time_on_read_none_s" title="Permalink to this definition">¶</a></dt>
<dd><p>One third of the expected rate frames_per_buffer will be filled</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="stream2py.sources.audio.PaStatusFlags">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.audio.</code><code class="sig-name descname">PaStatusFlags</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PaStatusFlags"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.audio.PaStatusFlags" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.IntFlag</span></code></p>
<p>Enum to check status_flag for error codes</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stream2py.sources.audio</span> <span class="k">import</span> <span class="n">PaStatusFlags</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PaStatusFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;PaStatusFlags.paNoError: 0&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PaStatusFlags</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&lt;PaStatusFlags.paInputOverflow: 2&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PaStatusFlags</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">&lt;PaStatusFlags.paInputOverflow|paInputUnderflow: 3&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PaStatusFlags</span><span class="o">.</span><span class="n">paInputOverflow</span> <span class="ow">in</span> <span class="n">PaStatusFlags</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># Check if contains certain error</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PaStatusFlags</span><span class="o">.</span><span class="n">paNoError</span> <span class="o">==</span> <span class="n">PaStatusFlags</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># Check for no error</span>
<span class="go">False</span>
</pre></div>
</div>
<dl class="py attribute">
<dt id="stream2py.sources.audio.PaStatusFlags.paNoError">
<code class="sig-name descname">paNoError</code><em class="property"> = 0</em><a class="headerlink" href="#stream2py.sources.audio.PaStatusFlags.paNoError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="stream2py.sources.audio.PaStatusFlags.paInputUnderflow">
<code class="sig-name descname">paInputUnderflow</code><em class="property"> = 1</em><a class="headerlink" href="#stream2py.sources.audio.PaStatusFlags.paInputUnderflow" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="stream2py.sources.audio.PaStatusFlags.paInputOverflow">
<code class="sig-name descname">paInputOverflow</code><em class="property"> = 2</em><a class="headerlink" href="#stream2py.sources.audio.PaStatusFlags.paInputOverflow" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="stream2py.sources.audio.PaStatusFlags.paOutputUnderflow">
<code class="sig-name descname">paOutputUnderflow</code><em class="property"> = 4</em><a class="headerlink" href="#stream2py.sources.audio.PaStatusFlags.paOutputUnderflow" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="stream2py.sources.audio.PaStatusFlags.paOutputOverflow">
<code class="sig-name descname">paOutputOverflow</code><em class="property"> = 8</em><a class="headerlink" href="#stream2py.sources.audio.PaStatusFlags.paOutputOverflow" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="stream2py.sources.audio.PaStatusFlags.paPrimingOutput">
<code class="sig-name descname">paPrimingOutput</code><em class="property"> = 16</em><a class="headerlink" href="#stream2py.sources.audio.PaStatusFlags.paPrimingOutput" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="pyaudio-mixins">
<h2>PyAudio Mixins<a class="headerlink" href="#pyaudio-mixins" title="Permalink to this headline">¶</a></h2>
<p>Example of how to use mixins to manipulate behavior to suit your needs.</p>
<dl class="py class">
<dt id="stream2py.sources.audio.FillErrorWithZeroesMixin">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.audio.</code><code class="sig-name descname">FillErrorWithZeroesMixin</code><a class="reference internal" href="_modules/stream2py/sources/audio.html#FillErrorWithZeroesMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.audio.FillErrorWithZeroesMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Mixin to handle all pyaudio’s error status flags by filling the error time gap with zeros</p>
</dd></dl>

<dl class="py class">
<dt id="stream2py.sources.audio.DictDataMixin">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.audio.</code><code class="sig-name descname">DictDataMixin</code><a class="reference internal" href="_modules/stream2py/sources/audio.html#DictDataMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.audio.DictDataMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Mixin to reduce data to a dict with bt, wf, and status_flag. Removing typically discarded information.</p>
<dl class="py method">
<dt id="stream2py.sources.audio.DictDataMixin.data_to_append">
<code class="sig-name descname">data_to_append</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timestamp</span></em>, <em class="sig-param"><span class="n">waveform</span></em>, <em class="sig-param"><span class="n">frame_count</span></em>, <em class="sig-param"><span class="n">time_info</span></em>, <em class="sig-param"><span class="n">status_flags</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#DictDataMixin.data_to_append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.audio.DictDataMixin.data_to_append" title="Permalink to this definition">¶</a></dt>
<dd><p>Simplify data only</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamp</strong> – start time of waveform</p></li>
<li><p><strong>waveform</strong> – recorded input data</p></li>
<li><p><strong>frame_count</strong> – discarded data</p></li>
<li><p><strong>time_info</strong> – discarded data</p></li>
<li><p><strong>status_flags</strong> – PaStatusFlags error codes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>{‘bt’: timestamp, ‘wf’: waveform, ‘status_flags’: status_flags}</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.audio.DictDataMixin.key">
<code class="sig-name descname">key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span> &#x2192; ComparableType<a class="reference internal" href="_modules/stream2py/sources/audio.html#DictDataMixin.key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.audio.DictDataMixin.key" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – {‘bt’: timestamp, ‘wf’: waveform, ‘status_flags’: status_flags}</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>data[‘bt’]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="stream2py.sources.audio.RaiseRuntimeErrorOnStatusFlagMixin">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.audio.</code><code class="sig-name descname">RaiseRuntimeErrorOnStatusFlagMixin</code><a class="reference internal" href="_modules/stream2py/sources/audio.html#RaiseRuntimeErrorOnStatusFlagMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.audio.RaiseRuntimeErrorOnStatusFlagMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Mixin to raise RuntimeError when status_flag is not PaStatusFlags.paNoError (0)</p>
</dd></dl>

</div>
<div class="section" id="example-pyaudio-mixin-usage">
<h2>Example PyAudio Mixin Usage<a class="headerlink" href="#example-pyaudio-mixin-usage" title="Permalink to this headline">¶</a></h2>
<p>Mixins must be subclassed in order of precedence from left to right.
Meaning the base class at the right and mixins with overloading methods to the left.</p>
<dl class="py class">
<dt id="stream2py.sources.audio.PyAudioSourceReaderRaiseOnError">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.audio.</code><code class="sig-name descname">PyAudioSourceReaderRaiseOnError</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">rate</span><span class="o">=</span><span class="default_value">44100</span></em>, <em class="sig-param"><span class="n">width</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">unsigned</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">channels</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">input_device_index</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">frames_per_buffer</span><span class="o">=</span><span class="default_value">1024</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReaderRaiseOnError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.audio.PyAudioSourceReaderRaiseOnError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="sources.html#stream2py.sources.audio.RaiseRuntimeErrorOnStatusFlagMixin" title="stream2py.sources.audio.RaiseRuntimeErrorOnStatusFlagMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">stream2py.sources.audio.RaiseRuntimeErrorOnStatusFlagMixin</span></code></a>, <a class="reference internal" href="sources.html#stream2py.sources.audio.PyAudioSourceReader" title="stream2py.sources.audio.PyAudioSourceReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">stream2py.sources.audio.PyAudioSourceReader</span></code></a></p>
<p>PyAudioSourceReader changed to handle errors by raising RuntimeError</p>
</dd></dl>

<dl class="py class">
<dt id="id24">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.audio.</code><code class="sig-name descname">PyAudioSourceReaderRaiseOnError</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">rate</span><span class="o">=</span><span class="default_value">44100</span></em>, <em class="sig-param"><span class="n">width</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">unsigned</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">channels</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">input_device_index</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">frames_per_buffer</span><span class="o">=</span><span class="default_value">1024</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReaderRaiseOnError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id24" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="sources.html#stream2py.sources.audio.RaiseRuntimeErrorOnStatusFlagMixin" title="stream2py.sources.audio.RaiseRuntimeErrorOnStatusFlagMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">stream2py.sources.audio.RaiseRuntimeErrorOnStatusFlagMixin</span></code></a>, <a class="reference internal" href="sources.html#stream2py.sources.audio.PyAudioSourceReader" title="stream2py.sources.audio.PyAudioSourceReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">stream2py.sources.audio.PyAudioSourceReader</span></code></a></p>
<p>PyAudioSourceReader changed to handle errors by raising RuntimeError</p>
</dd></dl>

<dl class="py class">
<dt id="stream2py.sources.audio.PyAudioSourceReaderWithZeroedErrorsAndDictData">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.audio.</code><code class="sig-name descname">PyAudioSourceReaderWithZeroedErrorsAndDictData</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">rate</span><span class="o">=</span><span class="default_value">44100</span></em>, <em class="sig-param"><span class="n">width</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">unsigned</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">channels</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">input_device_index</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">frames_per_buffer</span><span class="o">=</span><span class="default_value">1024</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReaderWithZeroedErrorsAndDictData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.audio.PyAudioSourceReaderWithZeroedErrorsAndDictData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="sources.html#stream2py.sources.audio.DictDataMixin" title="stream2py.sources.audio.DictDataMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">stream2py.sources.audio.DictDataMixin</span></code></a>, <a class="reference internal" href="sources.html#stream2py.sources.audio.FillErrorWithZeroesMixin" title="stream2py.sources.audio.FillErrorWithZeroesMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">stream2py.sources.audio.FillErrorWithZeroesMixin</span></code></a>, <a class="reference internal" href="sources.html#stream2py.sources.audio.PyAudioSourceReader" title="stream2py.sources.audio.PyAudioSourceReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">stream2py.sources.audio.PyAudioSourceReader</span></code></a></p>
<p>PyAudioSourceReader changed to handle errors and serve data in an easy to read dict.</p>
</dd></dl>

<dl class="py class">
<dt id="stream2py.sources.audio.PaCallbackReturnCodes">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.audio.</code><code class="sig-name descname">PaCallbackReturnCodes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PaCallbackReturnCodes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.audio.PaCallbackReturnCodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Enum of valid _stream_callback return codes.
Only used by PyAudioSourceReader._stream_callback</p>
</dd></dl>

<dl class="py class">
<dt id="id25">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.audio.</code><code class="sig-name descname">PaStatusFlags</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PaStatusFlags"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id25" title="Permalink to this definition">¶</a></dt>
<dd><p>Enum to check status_flag for error codes</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stream2py.sources.audio</span> <span class="k">import</span> <span class="n">PaStatusFlags</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PaStatusFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;PaStatusFlags.paNoError: 0&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PaStatusFlags</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&lt;PaStatusFlags.paInputOverflow: 2&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PaStatusFlags</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">&lt;PaStatusFlags.paInputOverflow|paInputUnderflow: 3&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PaStatusFlags</span><span class="o">.</span><span class="n">paInputOverflow</span> <span class="ow">in</span> <span class="n">PaStatusFlags</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># Check if contains certain error</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PaStatusFlags</span><span class="o">.</span><span class="n">paNoError</span> <span class="o">==</span> <span class="n">PaStatusFlags</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># Check for no error</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="id26">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.audio.</code><code class="sig-name descname">PyAudioSourceReader</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">rate</span><span class="o">=</span><span class="default_value">44100</span></em>, <em class="sig-param"><span class="n">width</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">unsigned</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">channels</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">input_device_index</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">frames_per_buffer</span><span class="o">=</span><span class="default_value">1024</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id26" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="id27">
<em class="property">static </em><code class="sig-name descname">audio_buffer_size_seconds_to_maxlen</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer_size_seconds</span></em>, <em class="sig-param"><span class="n">rate</span></em>, <em class="sig-param"><span class="n">frames_per_buffer</span></em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.audio_buffer_size_seconds_to_maxlen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id27" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate maxlen for StreamBuffer to keep a minimum of buffer_size_seconds of data on buffer</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buffer_size_seconds</strong> – desired length of StreamBuffer in seconds</p></li>
<li><p><strong>rate</strong> – sample rate</p></li>
<li><p><strong>frames_per_buffer</strong> – number of frames per buffer</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>maxlen for StreamBuffer</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="id28">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id28" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop audio stream</p>
</dd></dl>

<dl class="py method">
<dt id="id29">
<code class="sig-name descname">data_to_append</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timestamp</span></em>, <em class="sig-param"><span class="n">waveform</span></em>, <em class="sig-param"><span class="n">frame_count</span></em>, <em class="sig-param"><span class="n">time_info</span></em>, <em class="sig-param"><span class="n">status_flags</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.data_to_append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id29" title="Permalink to this definition">¶</a></dt>
<dd><p>Can to be overloaded to change the shape of read outputs by altering the return value.
The key function must also be overloaded to return timestamp from the new shape.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamp</strong> – start time of waveform</p></li>
<li><p><strong>waveform</strong> – recorded input data</p></li>
<li><p><strong>frame_count</strong> – number of frames, sample count</p></li>
<li><p><strong>time_info</strong> – dict, see <a class="reference external" href="http://portaudio.com/docs/v19-doxydocs/structPaStreamCallbackTimeInfo.html">http://portaudio.com/docs/v19-doxydocs/structPaStreamCallbackTimeInfo.html</a></p></li>
<li><p><strong>status_flags</strong> – PaStatusFlags</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(timestamp, waveform, frame_count, time_info, status_flags)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="id30">
<em class="property">property </em><code class="sig-name descname">info</code><a class="headerlink" href="#id30" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a dict with init kwargs, bt, and device info</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stream2py.sources.audio</span> <span class="k">import</span> <span class="n">PyAudioSourceReader</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="k">import</span> <span class="n">pprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source</span> <span class="o">=</span> <span class="n">PyAudioSourceReader</span><span class="p">(</span><span class="n">rate</span><span class="o">=</span><span class="mi">44100</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">channels</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">input_device_index</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">frames_per_buffer</span><span class="o">=</span><span class="mi">4096</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">info</span><span class="p">)</span> 
<span class="go">{&#39;bt&#39;: 1582851038965183,</span>
<span class="go"> &#39;channels&#39;: 1,</span>
<span class="go"> &#39;device_info&#39;: {&#39;defaultHighInputLatency&#39;: 0.021333333333333333,</span>
<span class="go">                 &#39;defaultHighOutputLatency&#39;: 0.021333333333333333,</span>
<span class="go">                 &#39;defaultLowInputLatency&#39;: 0.021333333333333333,</span>
<span class="go">                 &#39;defaultLowOutputLatency&#39;: 0.021333333333333333,</span>
<span class="go">                 &#39;defaultSampleRate&#39;: 48000.0,</span>
<span class="go">                 &#39;hostApi&#39;: 0,</span>
<span class="go">                 &#39;index&#39;: 7,</span>
<span class="go">                 &#39;maxInputChannels&#39;: 128,</span>
<span class="go">                 &#39;maxOutputChannels&#39;: 128,</span>
<span class="go">                 &#39;name&#39;: &#39;sysdefault&#39;,</span>
<span class="go">                 &#39;structVersion&#39;: 2},</span>
<span class="go"> &#39;frames_per_buffer&#39;: 4096,</span>
<span class="go"> &#39;input_device_index&#39;: 7,</span>
<span class="go"> &#39;rate&#39;: 44100,</span>
<span class="go"> &#39;unsigned&#39;: True,</span>
<span class="go"> &#39;width&#39;: 2}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="id31">
<code class="sig-name descname">key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span> &#x2192; ComparableType<a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id31" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – (timestamp, waveform, frame_count, time_info, status_flags)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>timestamp</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="id32">
<em class="property">classmethod </em><code class="sig-name descname">list_device_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>dict<span class="p">]</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.list_device_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id32" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition-todo admonition" id="id33">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>filter for only devices with input channels</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="id34">
<code class="sig-name descname">open</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id34" title="Permalink to this definition">¶</a></dt>
<dd><p>Will first close if already open and clear any data before starting the audio stream</p>
</dd></dl>

<dl class="py method">
<dt id="id35">
<code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id35" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns one data item as structured by PyAudioSourceReader.data_to_append</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(timestamp, waveform, frame_count, time_info, status_flags)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="id36">
<em class="property">property </em><code class="sig-name descname">sleep_time_on_read_none_s</code><a class="headerlink" href="#id36" title="Permalink to this definition">¶</a></dt>
<dd><p>One third of the expected rate frames_per_buffer will be filled</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="stream2py-sources-raw-plc">
<h1>stream2py.sources.raw_plc<a class="headerlink" href="#stream2py-sources-raw-plc" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="stream2py-sources-net">
<h1>stream2py.sources.net<a class="headerlink" href="#stream2py-sources-net" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.sources.net"></span></div>
<div class="section" id="stream2py-sources">
<h1>stream2py.sources<a class="headerlink" href="#stream2py-sources" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.sources"></span><div class="section" id="module-0">
<span id="sources"></span><h2>Sources<a class="headerlink" href="#module-0" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id37">
<h3>PyAudio Source<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h3>
<p>This source requires PyAudio.
<a class="reference external" href="https://people.csail.mit.edu/hubert/pyaudio/">Find PyAudio installation instructions here</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">PyAudio</span>
</pre></div>
</div>
<dl class="py class">
<dt id="id39">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.audio.</code><code class="sig-name descname">PyAudioSourceReader</code><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id39" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stream2py.source_reader.SourceReader" title="stream2py.source_reader.SourceReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">stream2py.source_reader.SourceReader</span></code></a></p>
<dl class="py method">
<dt id="id40">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">rate</span><span class="o">=</span><span class="default_value">44100</span></em>, <em class="sig-param"><span class="n">width</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">unsigned</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">channels</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">input_device_index</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">frames_per_buffer</span><span class="o">=</span><span class="default_value">1024</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id40" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rate</strong> – Specifies the desired sample rate (in Hz)</p></li>
<li><p><strong>width</strong> – Sample width in bytes (1, 2, 3, or 4)</p></li>
<li><p><strong>unsigned</strong> – For 1 byte width, specifies signed or unsigned format. Ignored if byte width is not 1.</p></li>
<li><p><strong>channels</strong> – The desired number of input channels. Ignored if input_device is not specified (or None).</p></li>
<li><p><strong>input_device_index</strong> – Index of Input Device to use. Unspecified (or None) uses default device.</p></li>
<li><p><strong>frames_per_buffer</strong> – Specifies the number of frames per buffer.</p></li>
</ul>
</dd>
</dl>
<div class="admonition-todo admonition" id="id41">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>option to get input device by name instead of index and warn of duplicate names or missing</p></li>
<li><p>input_device_index is used by info and must be found and filled into _init_kwargs if looking up by name</p></li>
<li><p>warn if index does not match name when both name and index are specified</p></li>
<li><p>option to get input from file</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt id="id42">
<em class="property">static </em><code class="sig-name descname">audio_buffer_size_seconds_to_maxlen</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer_size_seconds</span></em>, <em class="sig-param"><span class="n">rate</span></em>, <em class="sig-param"><span class="n">frames_per_buffer</span></em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.audio_buffer_size_seconds_to_maxlen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id42" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate maxlen for StreamBuffer to keep a minimum of buffer_size_seconds of data on buffer</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buffer_size_seconds</strong> – desired length of StreamBuffer in seconds</p></li>
<li><p><strong>rate</strong> – sample rate</p></li>
<li><p><strong>frames_per_buffer</strong> – number of frames per buffer</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>maxlen for StreamBuffer</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="id43">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id43" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop audio stream</p>
</dd></dl>

<dl class="py method">
<dt id="id44">
<code class="sig-name descname">data_to_append</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timestamp</span></em>, <em class="sig-param"><span class="n">waveform</span></em>, <em class="sig-param"><span class="n">frame_count</span></em>, <em class="sig-param"><span class="n">time_info</span></em>, <em class="sig-param"><span class="n">status_flags</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.data_to_append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id44" title="Permalink to this definition">¶</a></dt>
<dd><p>Can to be overloaded to change the shape of read outputs by altering the return value.
The key function must also be overloaded to return timestamp from the new shape.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamp</strong> – start time of waveform</p></li>
<li><p><strong>waveform</strong> – recorded input data</p></li>
<li><p><strong>frame_count</strong> – number of frames, sample count</p></li>
<li><p><strong>time_info</strong> – dict, see <a class="reference external" href="http://portaudio.com/docs/v19-doxydocs/structPaStreamCallbackTimeInfo.html">http://portaudio.com/docs/v19-doxydocs/structPaStreamCallbackTimeInfo.html</a></p></li>
<li><p><strong>status_flags</strong> – PaStatusFlags</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(timestamp, waveform, frame_count, time_info, status_flags)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="id45">
<em class="property">property </em><code class="sig-name descname">info</code><a class="headerlink" href="#id45" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a dict with init kwargs, bt, and device info</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stream2py.sources.audio</span> <span class="k">import</span> <span class="n">PyAudioSourceReader</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="k">import</span> <span class="n">pprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source</span> <span class="o">=</span> <span class="n">PyAudioSourceReader</span><span class="p">(</span><span class="n">rate</span><span class="o">=</span><span class="mi">44100</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">channels</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">input_device_index</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">frames_per_buffer</span><span class="o">=</span><span class="mi">4096</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">info</span><span class="p">)</span> 
<span class="go">{&#39;bt&#39;: 1582851038965183,</span>
<span class="go"> &#39;channels&#39;: 1,</span>
<span class="go"> &#39;device_info&#39;: {&#39;defaultHighInputLatency&#39;: 0.021333333333333333,</span>
<span class="go">                 &#39;defaultHighOutputLatency&#39;: 0.021333333333333333,</span>
<span class="go">                 &#39;defaultLowInputLatency&#39;: 0.021333333333333333,</span>
<span class="go">                 &#39;defaultLowOutputLatency&#39;: 0.021333333333333333,</span>
<span class="go">                 &#39;defaultSampleRate&#39;: 48000.0,</span>
<span class="go">                 &#39;hostApi&#39;: 0,</span>
<span class="go">                 &#39;index&#39;: 7,</span>
<span class="go">                 &#39;maxInputChannels&#39;: 128,</span>
<span class="go">                 &#39;maxOutputChannels&#39;: 128,</span>
<span class="go">                 &#39;name&#39;: &#39;sysdefault&#39;,</span>
<span class="go">                 &#39;structVersion&#39;: 2},</span>
<span class="go"> &#39;frames_per_buffer&#39;: 4096,</span>
<span class="go"> &#39;input_device_index&#39;: 7,</span>
<span class="go"> &#39;rate&#39;: 44100,</span>
<span class="go"> &#39;unsigned&#39;: True,</span>
<span class="go"> &#39;width&#39;: 2}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="id46">
<code class="sig-name descname">key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span> &#x2192; ComparableType<a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id46" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – (timestamp, waveform, frame_count, time_info, status_flags)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>timestamp</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="id47">
<em class="property">classmethod </em><code class="sig-name descname">list_device_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>dict<span class="p">]</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.list_device_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id47" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition-todo admonition" id="id48">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>filter for only devices with input channels</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="id49">
<code class="sig-name descname">open</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id49" title="Permalink to this definition">¶</a></dt>
<dd><p>Will first close if already open and clear any data before starting the audio stream</p>
</dd></dl>

<dl class="py method">
<dt id="id50">
<code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReader.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id50" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns one data item as structured by PyAudioSourceReader.data_to_append</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(timestamp, waveform, frame_count, time_info, status_flags)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="id51">
<em class="property">property </em><code class="sig-name descname">sleep_time_on_read_none_s</code><a class="headerlink" href="#id51" title="Permalink to this definition">¶</a></dt>
<dd><p>One third of the expected rate frames_per_buffer will be filled</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="id52">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.audio.</code><code class="sig-name descname">PaStatusFlags</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PaStatusFlags"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id52" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.IntFlag</span></code></p>
<p>Enum to check status_flag for error codes</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stream2py.sources.audio</span> <span class="k">import</span> <span class="n">PaStatusFlags</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PaStatusFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;PaStatusFlags.paNoError: 0&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PaStatusFlags</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&lt;PaStatusFlags.paInputOverflow: 2&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PaStatusFlags</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">&lt;PaStatusFlags.paInputOverflow|paInputUnderflow: 3&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PaStatusFlags</span><span class="o">.</span><span class="n">paInputOverflow</span> <span class="ow">in</span> <span class="n">PaStatusFlags</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># Check if contains certain error</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PaStatusFlags</span><span class="o">.</span><span class="n">paNoError</span> <span class="o">==</span> <span class="n">PaStatusFlags</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># Check for no error</span>
<span class="go">False</span>
</pre></div>
</div>
<dl class="py attribute">
<dt id="id53">
<code class="sig-name descname">paNoError</code><em class="property"> = 0</em><a class="headerlink" href="#id53" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id54">
<code class="sig-name descname">paInputUnderflow</code><em class="property"> = 1</em><a class="headerlink" href="#id54" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id55">
<code class="sig-name descname">paInputOverflow</code><em class="property"> = 2</em><a class="headerlink" href="#id55" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id56">
<code class="sig-name descname">paOutputUnderflow</code><em class="property"> = 4</em><a class="headerlink" href="#id56" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id57">
<code class="sig-name descname">paOutputOverflow</code><em class="property"> = 8</em><a class="headerlink" href="#id57" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="id58">
<code class="sig-name descname">paPrimingOutput</code><em class="property"> = 16</em><a class="headerlink" href="#id58" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="id59">
<h3>PyAudio Mixins<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h3>
<p>Example of how to use mixins to manipulate behavior to suit your needs.</p>
<dl class="py class">
<dt id="id60">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.audio.</code><code class="sig-name descname">FillErrorWithZeroesMixin</code><a class="reference internal" href="_modules/stream2py/sources/audio.html#FillErrorWithZeroesMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id60" title="Permalink to this definition">¶</a></dt>
<dd><p>Mixin to handle all pyaudio’s error status flags by filling the error time gap with zeros</p>
</dd></dl>

<dl class="py class">
<dt id="id61">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.audio.</code><code class="sig-name descname">DictDataMixin</code><a class="reference internal" href="_modules/stream2py/sources/audio.html#DictDataMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id61" title="Permalink to this definition">¶</a></dt>
<dd><p>Mixin to reduce data to a dict with bt, wf, and status_flag. Removing typically discarded information.</p>
<dl class="py method">
<dt id="id62">
<code class="sig-name descname">data_to_append</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timestamp</span></em>, <em class="sig-param"><span class="n">waveform</span></em>, <em class="sig-param"><span class="n">frame_count</span></em>, <em class="sig-param"><span class="n">time_info</span></em>, <em class="sig-param"><span class="n">status_flags</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#DictDataMixin.data_to_append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id62" title="Permalink to this definition">¶</a></dt>
<dd><p>Simplify data only</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamp</strong> – start time of waveform</p></li>
<li><p><strong>waveform</strong> – recorded input data</p></li>
<li><p><strong>frame_count</strong> – discarded data</p></li>
<li><p><strong>time_info</strong> – discarded data</p></li>
<li><p><strong>status_flags</strong> – PaStatusFlags error codes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>{‘bt’: timestamp, ‘wf’: waveform, ‘status_flags’: status_flags}</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="id63">
<code class="sig-name descname">key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span> &#x2192; ComparableType<a class="reference internal" href="_modules/stream2py/sources/audio.html#DictDataMixin.key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id63" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – {‘bt’: timestamp, ‘wf’: waveform, ‘status_flags’: status_flags}</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>data[‘bt’]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="id64">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.audio.</code><code class="sig-name descname">RaiseRuntimeErrorOnStatusFlagMixin</code><a class="reference internal" href="_modules/stream2py/sources/audio.html#RaiseRuntimeErrorOnStatusFlagMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id64" title="Permalink to this definition">¶</a></dt>
<dd><p>Mixin to raise RuntimeError when status_flag is not PaStatusFlags.paNoError (0)</p>
</dd></dl>

</div>
<div class="section" id="id65">
<h3>Example PyAudio Mixin Usage<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h3>
<p>Mixins must be subclassed in order of precedence from left to right.
Meaning the base class at the right and mixins with overloading methods to the left.</p>
<dl class="py class">
<dt id="id66">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.audio.</code><code class="sig-name descname">PyAudioSourceReaderRaiseOnError</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">rate</span><span class="o">=</span><span class="default_value">44100</span></em>, <em class="sig-param"><span class="n">width</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">unsigned</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">channels</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">input_device_index</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">frames_per_buffer</span><span class="o">=</span><span class="default_value">1024</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReaderRaiseOnError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id66" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="sources.html#stream2py.sources.audio.RaiseRuntimeErrorOnStatusFlagMixin" title="stream2py.sources.audio.RaiseRuntimeErrorOnStatusFlagMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">stream2py.sources.audio.RaiseRuntimeErrorOnStatusFlagMixin</span></code></a>, <a class="reference internal" href="sources.html#stream2py.sources.audio.PyAudioSourceReader" title="stream2py.sources.audio.PyAudioSourceReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">stream2py.sources.audio.PyAudioSourceReader</span></code></a></p>
<p>PyAudioSourceReader changed to handle errors by raising RuntimeError</p>
</dd></dl>

<dl class="py class">
<dt id="id67">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.audio.</code><code class="sig-name descname">PyAudioSourceReaderRaiseOnError</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">rate</span><span class="o">=</span><span class="default_value">44100</span></em>, <em class="sig-param"><span class="n">width</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">unsigned</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">channels</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">input_device_index</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">frames_per_buffer</span><span class="o">=</span><span class="default_value">1024</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReaderRaiseOnError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id67" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="sources.html#stream2py.sources.audio.RaiseRuntimeErrorOnStatusFlagMixin" title="stream2py.sources.audio.RaiseRuntimeErrorOnStatusFlagMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">stream2py.sources.audio.RaiseRuntimeErrorOnStatusFlagMixin</span></code></a>, <a class="reference internal" href="sources.html#stream2py.sources.audio.PyAudioSourceReader" title="stream2py.sources.audio.PyAudioSourceReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">stream2py.sources.audio.PyAudioSourceReader</span></code></a></p>
<p>PyAudioSourceReader changed to handle errors by raising RuntimeError</p>
</dd></dl>

<dl class="py class">
<dt id="id68">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.audio.</code><code class="sig-name descname">PyAudioSourceReaderWithZeroedErrorsAndDictData</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">rate</span><span class="o">=</span><span class="default_value">44100</span></em>, <em class="sig-param"><span class="n">width</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">unsigned</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">channels</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">input_device_index</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">frames_per_buffer</span><span class="o">=</span><span class="default_value">1024</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/audio.html#PyAudioSourceReaderWithZeroedErrorsAndDictData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id68" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="sources.html#stream2py.sources.audio.DictDataMixin" title="stream2py.sources.audio.DictDataMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">stream2py.sources.audio.DictDataMixin</span></code></a>, <a class="reference internal" href="sources.html#stream2py.sources.audio.FillErrorWithZeroesMixin" title="stream2py.sources.audio.FillErrorWithZeroesMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">stream2py.sources.audio.FillErrorWithZeroesMixin</span></code></a>, <a class="reference internal" href="sources.html#stream2py.sources.audio.PyAudioSourceReader" title="stream2py.sources.audio.PyAudioSourceReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">stream2py.sources.audio.PyAudioSourceReader</span></code></a></p>
<p>PyAudioSourceReader changed to handle errors and serve data in an easy to read dict.</p>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="stream2py-sources-pchealth">
<h1>stream2py.sources.pchealth<a class="headerlink" href="#stream2py-sources-pchealth" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.sources.pchealth"></span><dl class="py class">
<dt id="stream2py.sources.pchealth.StatusInfoReader">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.pchealth.</code><code class="sig-name descname">StatusInfoReader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">read_interval_ms</span><span class="o">=</span><span class="default_value">1000</span></em>, <em class="sig-param"><span class="n">include_network_download_speed</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">include_network_upload_speed</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/pchealth.html#StatusInfoReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.pchealth.StatusInfoReader" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="stream2py.sources.pchealth.StatusInfoReader.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/pchealth.html#StatusInfoReader.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.pchealth.StatusInfoReader.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close and clean up source reader.
Will be called when StreamBuffer stops or if an exception is raised during read and append loop.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.pchealth.StatusInfoReader.info">
<em class="property">property </em><code class="sig-name descname">info</code><a class="headerlink" href="#stream2py.sources.pchealth.StatusInfoReader.info" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict with important source info. Default can be init_kwargs and open timestamp.</p>
<p>This info will be available in BufferReader after SourceReader has opened but any changes made between open and
close are not guaranteed to be visible. Any continuous status updates should be included with read data instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.pchealth.StatusInfoReader.key">
<code class="sig-name descname">key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Any</span></em><span class="sig-paren">)</span> &#x2192; ComparableType<a class="reference internal" href="_modules/stream2py/sources/pchealth.html#StatusInfoReader.key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.pchealth.StatusInfoReader.key" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – (index, timestamp, character)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>index</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.pchealth.StatusInfoReader.open">
<code class="sig-name descname">open</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/pchealth.html#StatusInfoReader.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.pchealth.StatusInfoReader.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up source to be read and set some source info affected by open time like the time of open.
Will be called in StreamBuffer immediately before first read.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.pchealth.StatusInfoReader.read">
<code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/pchealth.html#StatusInfoReader.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.pchealth.StatusInfoReader.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns one data item</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(index, timestamp, character)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.pchealth.StatusInfoReader.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/pchealth.html#StatusInfoReader.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.pchealth.StatusInfoReader.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Method representing the thread’s activity.</p>
<p>You may override this method in a subclass. The standard run() method
invokes the callable object passed to the object’s constructor as the
target argument, if any, with sequential and keyword arguments taken
from the args and kwargs arguments, respectively.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="stream2py-sources-plc">
<h1>stream2py.sources.plc<a class="headerlink" href="#stream2py-sources-plc" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="stream2py-sources-keyboard-input">
<h1>stream2py.sources.keyboard_input<a class="headerlink" href="#stream2py-sources-keyboard-input" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-stream2py.sources.keyboard_input"></span><dl class="py class">
<dt id="id69">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.sources.keyboard_input.</code><code class="sig-name descname">KeyboardInputSourceReader</code><a class="reference internal" href="_modules/stream2py/sources/keyboard_input.html#KeyboardInputSourceReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#id69" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="stream2py.sources.keyboard_input.KeyboardInputSourceReader.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/keyboard_input.html#KeyboardInputSourceReader.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.keyboard_input.KeyboardInputSourceReader.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close and clean up source reader.
Will be called when StreamBuffer stops or if an exception is raised during read and append loop.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.keyboard_input.KeyboardInputSourceReader.info">
<em class="property">property </em><code class="sig-name descname">info</code><a class="headerlink" href="#stream2py.sources.keyboard_input.KeyboardInputSourceReader.info" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict with important source info. Default can be init_kwargs and open timestamp.</p>
<p>This info will be available in BufferReader after SourceReader has opened but any changes made between open and
close are not guaranteed to be visible. Any continuous status updates should be included with read data instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.keyboard_input.KeyboardInputSourceReader.key">
<code class="sig-name descname">key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Any</span></em><span class="sig-paren">)</span> &#x2192; ComparableType<a class="reference internal" href="_modules/stream2py/sources/keyboard_input.html#KeyboardInputSourceReader.key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.keyboard_input.KeyboardInputSourceReader.key" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – (index, timestamp, character)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>index</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.keyboard_input.KeyboardInputSourceReader.open">
<code class="sig-name descname">open</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/keyboard_input.html#KeyboardInputSourceReader.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.keyboard_input.KeyboardInputSourceReader.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up source to be read and set some source info affected by open time like the time of open.
Will be called in StreamBuffer immediately before first read.</p>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.keyboard_input.KeyboardInputSourceReader.read">
<code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/keyboard_input.html#KeyboardInputSourceReader.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.keyboard_input.KeyboardInputSourceReader.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns one data item</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(index, timestamp, character)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="stream2py.sources.keyboard_input.KeyboardInputSourceReader.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/stream2py/sources/keyboard_input.html#KeyboardInputSourceReader.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stream2py.sources.keyboard_input.KeyboardInputSourceReader.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Method representing the thread’s activity.</p>
<p>You may override this method in a subclass. The standard run() method
invokes the callable object passed to the object’s constructor as the
target argument, if any, with sequential and keyword arguments taken
from the args and kwargs arguments, respectively.</p>
</dd></dl>

</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">stream2py</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="sources.html">Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_toc.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="readme_link.html">stream2py</a></li>
<li class="toctree-l1"><a class="reference internal" href="things_you_can_do.html">Get audio segments when ever I chose</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Andie Shining Phan.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/all_files.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>