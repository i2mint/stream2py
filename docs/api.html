
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>API Documentation &#8212; stream2py 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Get audio segments when ever I chose" href="things_you_can_do.html" />
    <link rel="prev" title="stream2py" href="readme_link.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="api-documentation">
<h1>API Documentation<a class="headerlink" href="#api-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="stream2py.SourceReader">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.</code><code class="sig-name descname">SourceReader</code><a class="headerlink" href="#stream2py.SourceReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract class interface to be used by StreamBuffer.</p>
<dl class="method">
<dt id="stream2py.SourceReader.close">
<em class="property">abstract </em><code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#stream2py.SourceReader.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close and clean up source reader.
Will be called when StreamBuffer stops or if an exception is raised during read and append loop.</p>
</dd></dl>

<dl class="method">
<dt id="stream2py.SourceReader.get_timestamp">
<em class="property">classmethod </em><code class="sig-name descname">get_timestamp</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#stream2py.SourceReader.get_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Get timestamp of now as int microseconds</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>timestamp in UTC microseconds</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stream2py.SourceReader.info">
<em class="property">abstract property </em><code class="sig-name descname">info</code><a class="headerlink" href="#stream2py.SourceReader.info" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict with important source info. Default can be init_kwargs and open timestamp.</p>
<p>This info will be available in BufferReader after SourceReader has opened but any changes made between open and
close are not guaranteed to be visible. Any continuous status updates should be included with read data instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stream2py.SourceReader.key">
<em class="property">abstract </em><code class="sig-name descname">key</code><span class="sig-paren">(</span><em class="sig-param">data: Any</em><span class="sig-paren">)</span> &#x2192; ComparableType<a class="headerlink" href="#stream2py.SourceReader.key" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts data into a comparable value to sort by</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – the return value of the ‘read’ method</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ComparableType</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stream2py.SourceReader.open">
<em class="property">abstract </em><code class="sig-name descname">open</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#stream2py.SourceReader.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up source to be read and set some source info affected by open time like the time of open.
Will be called in StreamBuffer immediately before first read.</p>
</dd></dl>

<dl class="method">
<dt id="stream2py.SourceReader.read">
<em class="property">abstract </em><code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional[Any]<a class="headerlink" href="#stream2py.SourceReader.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Must return data that is sortable with ‘key’ method or None. Data that is not readily sortable such as
ordered words of a sentence can be wrapped in a tuple (word_index, word).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>data or None</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stream2py.SourceReader.sleep_time_on_read_none_s">
<em class="property">property </em><code class="sig-name descname">sleep_time_on_read_none_s</code><a class="headerlink" href="#stream2py.SourceReader.sleep_time_on_read_none_s" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets default sleep time for StreamBuffer when it reads None from SourceReader.
Useful when you know the period between data points.</p>
<p>For example if data only comes once every 10 seconds,
it would be inefficient to try and read again every 0.1 seconds and get None up to 100 times
but every 10 seconds or even 1 second would be much more reasonable depending on the use case.
Not necessary if read is a blocking function that always returns a data point.</p>
<p>Default is None which delegates the sleep time to StreamBuffer’s default.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Optional[Union[int, float]] number of seconds to sleep</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stream2py.StreamBuffer">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.</code><code class="sig-name descname">StreamBuffer</code><a class="headerlink" href="#stream2py.StreamBuffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles starting and stopping SourceReader and making BufferReaders</p>
<dl class="method">
<dt id="stream2py.StreamBuffer.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">source_reader: stream2py.source_reader.SourceReader</em>, <em class="sig-param">*</em>, <em class="sig-param">maxlen: int</em>, <em class="sig-param">sleep_time_on_read_none_s: Union[int</em>, <em class="sig-param">float</em>, <em class="sig-param">None] = None</em><span class="sig-paren">)</span><a class="headerlink" href="#stream2py.StreamBuffer.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO: option to auto restart source on read exception</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source_reader</strong> – instance of a SourceReader subclass</p></li>
<li><p><strong>maxlen</strong> – max number of read data points to store in buffer before data starts dropping off the queue</p></li>
<li><p><strong>sleep_time_on_read_none_s</strong> – Seconds to sleep when reading None from source_reader. None to use defaults.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stream2py.StreamBuffer.is_running">
<em class="property">property </em><code class="sig-name descname">is_running</code><a class="headerlink" href="#stream2py.StreamBuffer.is_running" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if stop event has been set.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stream2py.StreamBuffer.mk_reader">
<code class="sig-name descname">mk_reader</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; stream2py.buffer_reader.BufferReader<a class="headerlink" href="#stream2py.StreamBuffer.mk_reader" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a BufferReader instance for the currently running  StreamBuffer.
Reader must be made after start() to have data from said start.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>BufferReader instance</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stream2py.StreamBuffer.source_reader_info">
<em class="property">property </em><code class="sig-name descname">source_reader_info</code><a class="headerlink" href="#stream2py.StreamBuffer.source_reader_info" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict with important source info set by SourceReader.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict or None</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stream2py.StreamBuffer.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#stream2py.StreamBuffer.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Open and start reading from source_reader into buffer</p>
</dd></dl>

<dl class="method">
<dt id="stream2py.StreamBuffer.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#stream2py.StreamBuffer.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop reading and close source_reader</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stream2py.BufferReader">
<em class="property">class </em><code class="sig-prename descclassname">stream2py.</code><code class="sig-name descname">BufferReader</code><a class="headerlink" href="#stream2py.BufferReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Reader that is constructed from StreamBuffer.mk_reader()</p>
<dl class="method">
<dt id="stream2py.BufferReader.is_stopped">
<em class="property">property </em><code class="sig-name descname">is_stopped</code><a class="headerlink" href="#stream2py.BufferReader.is_stopped" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if stop event has been set by StreamBuffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stream2py.BufferReader.last_item">
<em class="property">property </em><code class="sig-name descname">last_item</code><a class="headerlink" href="#stream2py.BufferReader.last_item" title="Permalink to this definition">¶</a></dt>
<dd><p>last_item cursor</p>
</dd></dl>

<dl class="method">
<dt id="stream2py.BufferReader.next">
<code class="sig-name descname">next</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">peek=False</em>, <em class="sig-param">ignore_no_item_found=False</em><span class="sig-paren">)</span><a class="headerlink" href="#stream2py.BufferReader.next" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds an item with a key greater than the last returned item.
Raise ValueError if no item found with key above last item.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>peek</strong> – if True, last_item cursor will not be updated</p></li>
<li><p><strong>ignore_no_item_found</strong> – if True, return None when no next item instead of raising exception</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>next item</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stream2py.BufferReader.range">
<code class="sig-name descname">range</code><span class="sig-paren">(</span><em class="sig-param">start</em>, <em class="sig-param">stop</em>, <em class="sig-param">step=None</em>, <em class="sig-param">*</em>, <em class="sig-param">peek=False</em>, <em class="sig-param">ignore_no_item_found=False</em>, <em class="sig-param">only_new_items=False</em><span class="sig-paren">)</span><a class="headerlink" href="#stream2py.BufferReader.range" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables:
1. Get last n minutes
2. Give me data I don’t have</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> – starting range key of item</p></li>
<li><p><strong>stop</strong> – ending range key of item</p></li>
<li><p><strong>step</strong> – </p></li>
<li><p><strong>peek</strong> – if True, last_item cursor will not be updated</p></li>
<li><p><strong>ignore_no_item_found</strong> – if True, return None when no next item instead of raising exception</p></li>
<li><p><strong>only_new_items</strong> – if True and no new items, raise ValueError or return None if ignore_no_item_found</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of items in range</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stream2py.BufferReader.source_reader_info">
<em class="property">property </em><code class="sig-name descname">source_reader_info</code><a class="headerlink" href="#stream2py.BufferReader.source_reader_info" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict with important source info set by SourceReader.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stream2py.BufferReader.tail">
<code class="sig-name descname">tail</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">peek=False</em>, <em class="sig-param">ignore_no_item_found=False</em>, <em class="sig-param">only_new_items=False</em><span class="sig-paren">)</span><a class="headerlink" href="#stream2py.BufferReader.tail" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the last item in buffer. Raise ValueError if no item found.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>peek</strong> – if True, last_item cursor will not be updated</p></li>
<li><p><strong>ignore_no_item_found</strong> – if True, return None when no next item instead of raising exception</p></li>
<li><p><strong>only_new_items</strong> – if True and no new items, raise ValueError or return None if ignore_no_item_found</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tail item</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">stream2py</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme_link.html">stream2py</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#classes">Classes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="things_you_can_do.html">Get audio segments when ever I chose</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="readme_link.html" title="previous chapter">stream2py</a></li>
      <li>Next: <a href="things_you_can_do.html" title="next chapter">Get audio segments when ever I chose</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Andie Shining Phan.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/api.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>